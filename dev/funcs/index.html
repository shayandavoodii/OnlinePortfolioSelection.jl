<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Functions · OnlinePortfolioSelection.jl</title><meta name="title" content="Functions · OnlinePortfolioSelection.jl"/><meta property="og:title" content="Functions · OnlinePortfolioSelection.jl"/><meta property="twitter:title" content="Functions · OnlinePortfolioSelection.jl"/><meta name="description" content="Documentation for OnlinePortfolioSelection.jl."/><meta property="og:description" content="Documentation for OnlinePortfolioSelection.jl."/><meta property="twitter:description" content="Documentation for OnlinePortfolioSelection.jl."/><meta property="og:url" content="https://shayandavoodii.github.io/OnlinePortfolioSelection.jl/funcs/"/><meta property="twitter:url" content="https://shayandavoodii.github.io/OnlinePortfolioSelection.jl/funcs/"/><link rel="canonical" href="https://shayandavoodii.github.io/OnlinePortfolioSelection.jl/funcs/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="OnlinePortfolioSelection.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">OnlinePortfolioSelection.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../fetchdata/">Fetch Financial Data</a></li><li><a class="tocitem" href="../python/">Use In Python</a></li><li><span class="tocitem">OPS Strategies</span><ul><li><a class="tocitem" href="../benchmark/">Benchmark</a></li><li><a class="tocitem" href="../FL/">Follow the Loser</a></li><li><a class="tocitem" href="../FW/">Follow the Winner</a></li><li><a class="tocitem" href="../PM/">Pattern-Matching</a></li><li><a class="tocitem" href="../ML/">Meta-Learning</a></li><li><a class="tocitem" href="../Combined/">Combined Strategies</a></li></ul></li><li><a class="tocitem" href="../performance_eval/">Performance Evaluation</a></li><li class="is-active"><a class="tocitem" href>Functions</a></li><li><a class="tocitem" href="../types/">Types</a></li><li><a class="tocitem" href="../refs/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Functions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Functions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/main/docs/src/funcs.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.aictr-Tuple{AbstractMatrix, Integer, Integer, Integer, AbstractVector, AbstractVector{&lt;:OnlinePortfolioSelection.TrendRep}}" href="#OnlinePortfolioSelection.aictr-Tuple{AbstractMatrix, Integer, Integer, Integer, AbstractVector, AbstractVector{&lt;:OnlinePortfolioSelection.TrendRep}}"><code>OnlinePortfolioSelection.aictr</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">aictr(
  prices::AbstractMatrix,
  horizon::Integer,
  w::Integer,
  ϵ::Integer,
  σ::AbstractVector,
  trend_model::AbstractVector{&lt;:TrendRep};
  bt::AbstractVector = ones(size(prices, 1))/size(prices, 1)
)</code></pre><p>Run the Adaptive Input and Composite Trend Representation (AICTR) algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>prices::AbstractMatrix</code>: Matrix of prices.</li><li><code>horizon::Integer</code>: Number investing days.</li><li><code>w::Integer</code>: Window size.</li><li><code>ϵ::Integer</code>: Update strength.</li><li><code>σ::AbstractVector</code>: Vector of size <code>L</code> that contains the standard deviation of each trend representation.</li><li><code>trend_model::AbstractVector{&lt;:TrendRep}</code>: Vector of trend representations. <a href="../types/#OnlinePortfolioSelection.SMAP"><code>SMAP</code></a>, <a href="../types/#OnlinePortfolioSelection.EMA"><code>EMA</code></a>, and <a href="../types/#OnlinePortfolioSelection.PP"><code>PP</code></a> are supported.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>bt::AbstractVector</code>: Initial portfolio vector of size <code>n_assets</code>.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware</header><div class="admonition-body"><p><code>prices</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An object of type <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;GOOG&quot;, &quot;AMZN&quot;, &quot;META&quot;, &quot;TSLA&quot;, &quot;BRK-A&quot;, &quot;NVDA&quot;, &quot;JPM&quot;, &quot;JNJ&quot;];

julia&gt; querry = [get_prices(ticker, startdt=&quot;2019-01-01&quot;, enddt=&quot;2019-12-31&quot;)[&quot;adjclose&quot;] for ticker ∈ tickers];

julia&gt; prices = stack(querry) |&gt; permutedims;

julia&gt; horizon = 5;

julia&gt; w = 3;

julia&gt; ϵ = 500;

julia&gt; σ = [0.5, 0.5];

julia&gt; models = [SMAP(), EMA(0.5)];

julia&gt; bt = [0.3, 0.3, 0.4];

julia&gt; model = aictr(prices, horizon, w, ϵ, σ, models)

julia&gt; model.b
10×5 Matrix{Float64}:
 0.1  0.0         0.0         0.0         0.0
 0.1  0.0         0.0         0.0         0.0
 0.1  1.0         6.92439e-8  0.0         0.0
 0.1  0.0         0.0         0.0         0.0
 0.1  0.0         1.0         0.0         0.0
 0.1  0.0         0.0         0.0         0.0
 0.1  6.92278e-8  0.0         0.0         0.0
 0.1  0.0         0.0         6.95036e-8  1.0
 0.1  0.0         0.0         0.0         0.0
 0.1  0.0         0.0         1.0         6.95537e-8</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://www.doi.org/10.1109/TNNLS.2018.2827952">Radial Basis Functions With Adaptive Input and Composite Trend Representation for Portfolio Selection</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/AICTR.jl#L322-L392">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.ann_sharpe</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ann_sharpe(APY::T, Rf::T, sigma_prtf::T) where T&lt;:AbstractFloat</code></pre><p>Calculate the Annualized Sharpe Ratio of investment. Also, see <a href="#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>, <a href="#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat"><code>mer</code></a>, <a href="#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a>, <a href="#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a>, <a href="#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a>, <a href="#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a>, and <a href="#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>APY::T</code>: the APY of investment.</li><li><code>Rf::T</code>: the risk-free rate of return.</li><li><code>sigma_prtf::T</code>: the standard deviation of the portfolio <span>$\sigma_p$</span>.</li></ul><p><strong>Returns</strong></p><ul><li><code>::AbstractFloat</code>: the Annualized Sharpe Ratio of investment.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Tools/metrics.jl#L234-L246">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}" href="#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>OnlinePortfolioSelection.ann_std</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ann_std(cum_ret::AbstractVector{AbstractFloat}; dpy)</code></pre><p>Calculate the Annualized Standard Deviation (<span>$\sigma_p$</span>) of portfolio. Also, see <a href="#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>, <a href="#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat"><code>mer</code></a>, <a href="#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a>, <a href="#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a>, <a href="#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a>, <a href="#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a>, and <a href="#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>cum_ret::AbstractVector{AbstractFloat}</code>: the cumulative wealth of investment during the investment period.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>dpy</code>: the number of days in a year.</li></ul><p><strong>Returns</strong></p><ul><li><code>::AbstractFloat</code>: the Annualized Standard Deviation (<span>$\sigma_p$</span>) of portfolio.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Tools/metrics.jl#L194-L207">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.anticor-Union{Tuple{T}, Tuple{Matrix{T}, Int64}} where T&lt;:Real" href="#OnlinePortfolioSelection.anticor-Union{Tuple{T}, Tuple{Matrix{T}, Int64}} where T&lt;:Real"><code>OnlinePortfolioSelection.anticor</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">anticor(adj_close::Matrix{T}, window::Int) where {T&lt;:Real}</code></pre><p>Run the Anticor algorithm on <code>adj_close</code> with window sizes <code>window</code>.</p><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{T}</code>: matrix of adjusted close prices</li><li><code>window::Int</code>: size of the window</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: An OPSAlgorithm object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; adj_close = [
       1. 2.
       4. 9.
       7. 8.
       10. 11.
       13. 7.
       8. 17.
       19. 20.
       22. 23.
       25. 8.
       2. 12.
       5. 12.
       5. 0.
       0. 2.
       1. 1.
       ];

julia&gt; adj_close = permutedims(adj_close);

julia&gt; m_anticor = anticor(adj_close, 3);

julia&gt; m_anticor.b
2×14 Matrix{Float64}:
 0.5  0.5  0.5  0.5  …  0.0  0.0  0.0  1.0
 0.5  0.5  0.5  0.5     1.0  1.0  1.0  0.0

julia&gt; sum(m_anticor.b, dims=1) .|&gt; isapprox(1., atol=1e-8) |&gt; all
true</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://www.doi.org/10.1613/jair.1336">Can We Learn to Beat the Best Stock</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/Anticor.jl#L1-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64" href="#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>OnlinePortfolioSelection.apy</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">apy(Sn::AbstractFloat, n_periods::S; dpy::S=252) where S&lt;:Int</code></pre><p>Calculate the Annual Percentage Yield (APY) of investment. Also, see <a href="#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>, <a href="#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat"><code>mer</code></a>, <a href="#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a>, <a href="#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a>, <a href="#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a>, <a href="#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a>, and <a href="#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>Sn::AbstractFloat</code>: the cumulative wealth of investment.</li><li><code>n_periods::S</code>: the number investment periods.</li><li><code>dpy::S=252</code>: the number of days in a year.</li></ul><p><strong>Returns</strong></p><ul><li><code>::AbstractFloat</code>: the APY of investment.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Tools/metrics.jl#L215-L227">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.at-Tuple{AbstractMatrix, AbstractMatrix}" href="#OnlinePortfolioSelection.at-Tuple{AbstractMatrix, AbstractMatrix}"><code>OnlinePortfolioSelection.at</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">at(rel_pr::AbstractMatrix, b::AbstractMatrix)</code></pre><p>Calculate the average turnover of the portfolio. Also, see <a href="#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>, <a href="#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat"><code>mer</code></a>, <a href="#OnlinePortfolioSelection.ir-Union{Tuple{S}, Tuple{AbstractMatrix{S}, AbstractMatrix{S}, AbstractVector{S}}} where S&lt;:AbstractFloat"><code>ir</code></a>, <a href="#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a>, <a href="#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a>, <a href="#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a>, <a href="#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a>, and <a href="#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: The relative price of the stocks.</li><li><code>b::AbstractMatrix</code>: The weights of the portfolio.</li></ul><p><strong>Returns</strong></p><ul><li><code>::AbstractFloat</code>: the average turnover of the portfolio.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Tools/metrics.jl#L287-L298">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.bcrp-Union{Tuple{AbstractMatrix{T}}, Tuple{T}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.bcrp-Union{Tuple{AbstractMatrix{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.bcrp</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">bcrp(rel_pr::AbstractMatrix{T}) where T&lt;:AbstractFloat</code></pre><p>Run Best Constant Rebalanced Portfolio (BCRP) algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix{T}</code>: Relative price matrix.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; rel_pr = rand(3, 8);

julia&gt; m_bcrp = bcrp(rel_pr);

julia&gt; m_bcrp.b
3×8 Matrix{Float64}:
 8.58038e-9  8.58038e-9  8.58038e-9  8.58038e-9  8.58038e-9  8.58038e-9  8.58038e-9  8.58038e-9
 1.0         1.0         1.0         1.0         1.0         1.0         1.0         1.0
 0.0         0.0         0.0         0.0         0.0         0.0         0.0         0.0

julia&gt; sum(m_bcrp.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://onlinelibrary.wiley.com/doi/10.1111/j.1467-9965.1991.tb00002.x">Universal Portfolios</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/BCRP.jl#L1-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.bk-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, S, S, T}} where {T&lt;:AbstractFloat, S&lt;:Integer}" href="#OnlinePortfolioSelection.bk-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, S, S, T}} where {T&lt;:AbstractFloat, S&lt;:Integer}"><code>OnlinePortfolioSelection.bk</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">bk(rel_price::AbstractMatrix{T}, K::S, L::S, c::T) where {T&lt;:AbstractFloat, S&lt;:Integer}</code></pre><p>Run Bᴷ algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>rel_price::AbstractMatrix{T}</code>: Relative prices of assets.</li><li><code>K::S</code>: Number of experts.</li><li><code>L::S</code>: Number of time windows.</li><li><code>c::T</code>: The similarity threshold.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_price</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An object of type <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; daily_relative_prices = rand(3, 20);
julia&gt; nexperts = 10;
julia&gt; nwindows = 3;
julia&gt; sim_thresh = 0.5;

julia&gt; model = bk(daily_relative_prices, nexperts, nwindows, sim_thresh);

julia&gt; model.b
3×20 Matrix{Float64}:
 0.333333  0.333333  0.354839  0.318677  …  0.333331  0.329797  0.322842  0.408401
 0.333333  0.333333  0.322581  0.362646     0.333339  0.340406  0.354317  0.295811
 0.333333  0.333333  0.322581  0.318677     0.333331  0.329797  0.322842  0.295789

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>Reference</strong></p><blockquote><p><a href="https://doi.org/10.1111/j.1467-9965.2006.00274.x">NONPARAMETRIC KERNEL-BASED SEQUENTIAL INVESTMENT STRATEGIES</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/BK.jl#L1-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.bs-Union{Tuple{Matrix{T}}, Tuple{T}} where T&lt;:Float64" href="#OnlinePortfolioSelection.bs-Union{Tuple{Matrix{T}}, Tuple{T}} where T&lt;:Float64"><code>OnlinePortfolioSelection.bs</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">bs(adj_close::Matrix{T}; last_n::Int=0) where {T&lt;:Float64}</code></pre><p>Run the Best So Far algorithm on the given data.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{T}</code>: A matrix of adjusted closing prices of assets.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>last_n::Int</code>: The number of periods to look back for the performance of each asset. If <code>last_n</code> is 0, then the performance is calculated from the first period to the previous period.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p>The <code>adj_close</code> matrix should be in the order of assets x periods.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: An instance of <code>OPSAlgorithm</code>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; adj_close = rand(5, 10);

julia&gt; model = bs(adj_close, last_n=2);

julia&gt; model.b
5×10 Matrix{Float64}:
 0.2  0.0  0.0  0.0  1.0  0.0  0.0  0.0  0.0  0.0
 0.2  0.0  0.0  1.0  0.0  1.0  0.0  0.0  0.0  0.0
 0.2  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.2  1.0  1.0  0.0  0.0  0.0  1.0  0.0  1.0  1.0
 0.2  0.0  0.0  0.0  0.0  0.0  0.0  1.0  0.0  0.0

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1142/S0219024907004251">KERNEL-BASED SEMI-LOG-OPTIMAL EMPIRICAL PORTFOLIO SELECTION STRATEGIES</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/BS.jl#L1-L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.caeg-Tuple{AbstractMatrix, AbstractVector}" href="#OnlinePortfolioSelection.caeg-Tuple{AbstractMatrix, AbstractVector}"><code>OnlinePortfolioSelection.caeg</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">caeg(rel_pr::AbstractMatrix, ηs::AbstractVector)</code></pre><p>Run CAEG algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: Historical relative prices. The paper&#39;s authors used <em>&quot;the ratio of closing price to last closing price&quot;</em>.</li><li><code>ηs::AbstractVector</code>: Learning rates.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;GOOG&quot;];

julia&gt; startdt, enddt = &quot;2020-1-1&quot;, &quot;2020-1-10&quot;;

julia&gt; open_querry = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;open&quot;] for ticker ∈ tickers];

julia&gt; open_ = stack(open_querry) |&gt; permutedims;

julia&gt; close_querry = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker ∈ tickers];

julia&gt; close_ = stack(close_querry) |&gt; permutedims;

julia&gt; rel_pr = close_./open_;

julia&gt; learning_rates = [0.02, 0.05];

julia&gt; model = caeg(rel_pr, learning_rates);

julia&gt; model.b
3×6 Matrix{Float64}:
 0.333333  0.333322  0.333286  0.333271  0.333287  0.333368
 0.333333  0.333295  0.333271  0.333171  0.333123  0.333076
 0.333333  0.333383  0.333443  0.333558  0.33359   0.333557</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1080/01605682.2020.1848358">Aggregating exponential gradient expert advice for online portfolio selection</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/CAEG.jl#L1-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.calmar</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">calmar(APY::T, MDD::T) where T&lt;:AbstractFloat</code></pre><p>Calculate the Calmar Ratio of investment. Also, see <a href="#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>, <a href="#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat"><code>mer</code></a>, <a href="#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a>, <a href="#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a>, <a href="#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a>, <a href="#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a>, and <a href="#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>APY::T</code>: the APY of investment.</li><li><code>MDD::T</code>: the MDD of investment.</li></ul><p><strong>Returns</strong></p><ul><li><code>::AbstractFloat</code>: the Calmar Ratio of investment.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Tools/metrics.jl#L272-L283">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.cluslog" href="#OnlinePortfolioSelection.cluslog"><code>OnlinePortfolioSelection.cluslog</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">cluslog(
  rel_pr::AbstractMatrix{&lt;:AbstractFloat},
  horizon::Int,
  TW::Int,
  clus_mod::Type{&lt;:ClusLogVariant},
  nclusters::Int,
  nclustering::Int,
  boundries::NTuple{2, AbstractFloat};
  progress::Bool=true
)</code></pre><p>Run KMNLOG, KMDLOG, etc., algorithms on the given data.</p><div class="admonition is-info"><header class="admonition-header">Important note</header><div class="admonition-body"><p>In order to use this function, you have to install the <a href="https://github.com/JuliaStats/Clustering.jl">Clustering.jl</a> package first, and then import it along with the OnlinePortfolioSelection.jl package:</p><pre><code class="language-julia hljs">julia&gt; using Pkg; Pkg.add(name=&quot;Clustering&quot;, version=&quot;0.15.2&quot;)
julia&gt; using OnlinePortfolioSelection, Clustering</code></pre></div></div><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix{&lt;:AbstractFloat}</code>: Relative prices of assets. Each column represents the price of an asset at a given time.</li><li><code>horizon::Int</code>: Number of trading days.</li><li><code>TW::Int</code>: Maximum time window length to be examined.</li><li><code>clus_mod::Type{&lt;:ClusLogVariant}</code>: Clustering model to be used. Currently, only <a href="../types/#OnlinePortfolioSelection.KMNLOG"><code>KMNLOG</code></a> and <a href="../types/#OnlinePortfolioSelection.KMDLOG"><code>KMDLOG</code></a> are supported.</li><li><code>nclusters::Int</code>: The maximum number of clusters to be examined.</li><li><code>nclustering::Int</code>: The number of times clustering algorithm is run for optimal number of clusters.</li><li><code>boundries::NTuple{2, AbstractFloat}</code>: The lower and upper boundries for the weights of assets in the portfolio.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>progress::Bool=true</code>: Whether to log the progress or not.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><p>Two clustering model is available as of now: <a href="../types/#OnlinePortfolioSelection.KMNLOG"><code>KMNLOG</code></a>, and <a href="../types/#OnlinePortfolioSelection.KMDLOG"><code>KMDLOG</code></a>. The first example utilizes <a href="../types/#OnlinePortfolioSelection.KMNLOG"><code>KMNLOG</code></a>:</p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, Clustering

julia&gt; adj_close = [
         1.5464 1.5852 1.6532 1.7245 1.5251 1.4185 1.2156 1.3231 1.3585 1.4563 1.4456
         1.2411 1.2854 1.3456 1.4123 1.5212 1.5015 1.4913 1.5212 1.5015 1.4913 1.5015
         1.3212 1.3315 1.3213 1.3153 1.3031 1.2913 1.2950 1.2953 1.3315 1.3213 1.3315
       ]

julia&gt; rel_pr = adj_close[:, 2:end]./adj_close[:, 1:end-1]

julia&gt; horizon = 3; TW = 3; nclusters_ = 3; nclustering = 10; lb, ub = 0.0, 1.;

julia&gt; model = cluslog(rel_pr, horizon, TW, KMNLOG, nclusters_, nclustering, (lb, ub));

julia&gt; model.b
3×3 Matrix{Float64}:
0.00264911  0.00317815  0.148012
0.973581    0.971728    0.848037
0.02377     0.0250939   0.00395028

julia&gt; sum(model.b , dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p>The same approach works for <a href="../types/#OnlinePortfolioSelection.KMDLOG"><code>KMDLOG</code></a> as well:</p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, Clustering

julia&gt; model = cluslog(rel_pr, horizon, TW, KMDLOG, nclusters_, nclustering, (lb, ub));

julia&gt; model.b
3×3 Matrix{Float64}:
4.59938e-7  4.96421e-7  4.89426e-7
0.999998    0.999997    0.999997
2.02964e-6  2.02787e-6  2.02964e-6

julia&gt; sum(model.b , dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p>See also <a href="../types/#OnlinePortfolioSelection.KMNLOG"><code>KMNLOG</code></a>, and <a href="../types/#OnlinePortfolioSelection.KMDLOG"><code>KMDLOG</code></a>.</p><p><strong>Reference</strong></p><blockquote><p><a href="https://doi.org/10.1016/j.eswa.2020.113546">An online portfolio selection algorithm using clustering approaches and considering transaction costs</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/CLUSLOG.jl#L1-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.cornk-Union{Tuple{T}, Tuple{Matrix{Float64}, Vararg{T, 4}}} where T&lt;:Int64" href="#OnlinePortfolioSelection.cornk-Union{Tuple{T}, Tuple{Matrix{Float64}, Vararg{T, 4}}} where T&lt;:Int64"><code>OnlinePortfolioSelection.cornk</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">cornk(
  adj_close::Matrix{Float64},
  horizon::T,
  k::T,
  w::T,
  p::T;
  init_budg=1,
  progress::Bool=false
) where T&lt;:Int</code></pre><p>Run CORN-K algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{Float64}</code>: Adjusted close prices of assets.</li><li><code>horizon::T</code>: The number of periods to invest.</li><li><code>k::T</code>: The number of top experts to be selected.</li><li><code>w::T</code>: maximum length of time window to be examined.</li><li><code>p::T</code>: maximum number of correlation coefficient thresholds.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>init_budg=1</code>: The initial budget for investment.</li><li><code>progress::Bool=false</code>: Whether to show the progress bar.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: An object of type <code>OPSAlgorithm</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; adj_close = rand(5, 100);

julia&gt; model = cornk(adj_close, 10, 3, 5, 3);

julia&gt; model.alg
&quot;CORN-K&quot;

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p>See <a href="#OnlinePortfolioSelection.cornu-Union{Tuple{M}, Tuple{T}, Tuple{Matrix{T}, M, M}} where {T&lt;:Float64, M&lt;:Int64}"><code>cornu</code></a>, and <a href="#OnlinePortfolioSelection.dricornk-Union{Tuple{M}, Tuple{T}, Tuple{Matrix{T}, Vector{T}, Vararg{M, 4}}} where {T&lt;:Float64, M&lt;:Int64}"><code>dricornk</code></a>.</p><p><strong>Reference</strong></p><blockquote><p><a href="https://doi.org/10.1145/1961189.1961193">CORN: Correlation-driven nonparametric learning approach for portfolio selection</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/CORN.jl#L84-L133">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.cornu-Union{Tuple{M}, Tuple{T}, Tuple{Matrix{T}, M, M}} where {T&lt;:Float64, M&lt;:Int64}" href="#OnlinePortfolioSelection.cornu-Union{Tuple{M}, Tuple{T}, Tuple{Matrix{T}, M, M}} where {T&lt;:Float64, M&lt;:Int64}"><code>OnlinePortfolioSelection.cornu</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">cornu(
  adj_close::Matrix{T},
  horizon::M,
  w::M;
  rho::T=0.2,
  init_budg=1,
  progress::Bool=false
) where {T&lt;:Float64, M&lt;:Int}</code></pre><p>Run CORN-U algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{T}</code>: Adjusted close prices of assets.</li><li><code>horizon::M</code>: The number of periods to invest.</li><li><code>w::M</code>: maximum length of time window to be examined.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>rho::T=0.2</code>: The correlation coefficient threshold.</li><li><code>init_budg=1</code>: The initial budget for investment.</li><li><code>progress::Bool=false</code>: Whether to show the progress bar.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: An object of type <code>OPSAlgorithm</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; adj_close = rand(5, 100);

julia&gt; model = cornu(adj_close, 10, 5, 0.5);

julia&gt; model.alg
&quot;CORN-U&quot;

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p>See <a href="#OnlinePortfolioSelection.cornk-Union{Tuple{T}, Tuple{Matrix{Float64}, Vararg{T, 4}}} where T&lt;:Int64"><code>cornk</code></a>, and <a href="#OnlinePortfolioSelection.dricornk-Union{Tuple{M}, Tuple{T}, Tuple{Matrix{T}, Vector{T}, Vararg{M, 4}}} where {T&lt;:Float64, M&lt;:Int64}"><code>dricornk</code></a>.</p><p><strong>Reference</strong></p><blockquote><p><a href="https://doi.org/10.1145/1961189.1961193">CORN: Correlation-driven nonparametric learning approach for portfolio selection</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/CORN.jl#L1-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.cwmr" href="#OnlinePortfolioSelection.cwmr"><code>OnlinePortfolioSelection.cwmr</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">cwmr(
  rel_pr::AbstractMatrix,
  ϕ::AbstractFloat,
  ϵ::AbstractFloat,
  variant::Type{&lt;:CWMRVariant},
  ptfdis::Type{&lt;:PtfDisVariant}
)

cwmr(
  rel_pr::AbstractMatrix,
  ϕ::AbstractVector,
  ϵ::AbstractVector,
  variant::Type{&lt;:CWMRVariant},
  ptfdis::Type{&lt;:PtfDisVariant};
  adt_ptf::Union{Nothing, AbstractVector{&lt;:AbstractMatrix}}=nothing
)</code></pre><p>Run the Confidence Weighted Mean Reversion (CWMR) algorithm.</p><div class="admonition is-info"><header class="admonition-header">Important note</header><div class="admonition-body"><p>In order to use this function, you have to install the <a href="https://github.com/JuliaStats/Distributions.jl">Distributions.jl</a> package first, and then import it along with the OnlinePortfolioSelection.jl package:</p><pre><code class="language-julia hljs">julia&gt; using Pkg; Pkg.add(&quot;Distributions&quot;)
julia&gt; using Distributions, OnlinePortfolioSelection</code></pre></div></div><p><strong>Methods</strong></p><ul><li><code>cwmr(rel_pr::AbstractMatrix, ϕ::AbstractFloat, ϵ::AbstractFloat, variant::Type{&lt;:CWMRVariant}, ptfdis::Type{&lt;:PtfDisVariant})</code></li><li><code>cwmr(rel_pr::AbstractMatrix, ϕ::AbstractVector, ϵ::AbstractVector, variant::Type{&lt;:CWMRVariant}, ptfdis::Type{&lt;:PtfDisVariant}; adt_ptf::Union{Nothing, AbstractVector{&lt;:AbstractMatrix}}=nothing)</code></li></ul><p><strong>Method 1</strong></p><p>Through this method, we can run the following variants of the CWMR algorithm: <code>CWMR-Var</code>, <code>CWMR-Stdev</code>, <code>CWMR-Var-s</code> and <code>CWMR-Stdev-s</code>.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: Relative prices of the assets.</li><li><code>ϕ::AbstractFloat</code>: Learning rate.</li><li><code>ϵ::AbstractFloat</code>: Expert&#39;s weight. It should be ∈ [0, 1].</li><li><code>variant::Type{&lt;:CWMRVariant}</code>: Variant of the algorithm. It can be <code>CWMRD</code> or <code>CWMRS</code>.</li><li><code>ptfdis::Type{&lt;:PtfDisVariant}</code>: Portfolio distribution. It can be <code>Var</code> or <code>Stdev</code>.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object that contains the result of running the algorithm.</li></ul><p><strong>Example</strong></p><p>Let&#39;s run all the variants of the first method, such as <code>CWMR-Var</code>, <code>CWMR-Stdev</code>, <code>CWMR-Var-s</code> and <code>CWMR-Stdev-s</code>:</p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance, Distributions

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;AMZN&quot;];

julia&gt; startdt, enddt = &quot;2019-01-01&quot;, &quot;2019-01-10&quot;;

julia&gt; querry = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker=tickers];

julia&gt; prices = stack(querry) |&gt; permutedims;

julia&gt; rel_pr = prices[:, 2:end]./prices[:, 1:end-1];

julia&gt; variant, ptf_distrib = CWMRS, Var;

julia&gt; model = cwmr(rel_pr, 0.5, 0.1, variant, ptf_distrib);

julia&gt; model.b
3×5 Matrix{Float64}:
 0.344307  1.0         1.0         0.965464   0.0
 0.274593  2.76907e-8  0.0         0.0186898  1.0
 0.3811    2.73722e-8  2.23057e-9  0.0158464  2.21487e-7</code></pre><p><strong>Method 2</strong></p><p>Through this method, we can run the following variants of the CWMR algorithm: <code>CWMR-Var-Mix</code>, <code>CWMR-Stdev-Mix</code>, <code>CWMR-Var-s-Mix</code> and <code>CWMR-Stdev-s-Mix</code>.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: Relative prices of the assets.</li><li><code>ϕ::AbstractVector</code>: A vector of learning rates.</li><li><code>ϵ::AbstractVector</code>: A vector of expert&#39;s weights. Each element should be ∈ [0, 1].</li><li><code>variant::Type{&lt;:CWMRVariant}</code>: Variant of the algorithm. It can be <code>CWMRD</code> or <code>CWMRS</code>.</li><li><code>ptfdis::Type{&lt;:PtfDisVariant}</code>: Portfolio distribution. It can be <code>Var</code> or <code>Stdev</code>.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Keyword Arguments</strong></p><ul><li><code>adt_ptf::Union{Nothing, AbstractVector{&lt;:AbstractMatrix}}=nothing</code>: A vector of additional expert&#39;s portfolios.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adt_ptf</code> can be <code>nothing</code> or a vector of matrices of size <code>n_assets</code> × <code>n_periods</code>. As noted in the paper, the additional expert&#39;s portfolios should be chosen from the set of universal strategies, such as &#39;UP&#39;, &#39;EG&#39;, &#39;ONS&#39;, etc. See <a href="#OnlinePortfolioSelection.eg-Tuple{AbstractMatrix}"><code>eg</code></a>, and <a href="#OnlinePortfolioSelection.up-Union{Tuple{AbstractMatrix{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>up</code></a> for more details.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object that contains the result of running the algorithm.</li></ul><p><strong>Example</strong></p><p>Let&#39;s run all the variants of the second method, such as <code>CWMR-Var-Mix</code>, <code>CWMR-Stdev-Mix</code>, <code>CWMR-Var-s-Mix</code> and <code>CWMR-Stdev-s-Mix</code>:</p><pre><code class="language-julia hljs">julia&gt; variant, ptf_distrib = CWMRS, Var;

julia&gt; model = cwmr(rel_pr, [0.5, 0.5], [0.1, 0.1], variant, ptf_distrib);

julia&gt; model.b
3×5 Matrix{Float64}:
 0.329642  0.853456   0.863553   0.819096  0.0671245
 0.338512  0.0667117  0.0694979  0.102701  0.842985
 0.331846  0.0798325  0.0669491  0.078203  0.0898904</code></pre><p>Now, let&#39;s pass two different &#39;EG&#39; portfolios as additional expert&#39;s portfolios:</p><pre><code class="language-julia hljs">julia&gt; variant, ptf_distrib = CWMRS, Var;

julia&gt; eg1 = eg(rel_pr, eta=0.1).b;

julia&gt; eg2 = eg(rel_pr, eta=0.2).b;

julia&gt; model = cwmr(rel_pr, [0.5, 0.5], [0.1, 0.1], variant, ptf_distrib, adt_ptf=[eg1, eg2]);

julia&gt; model.b
3×5 Matrix{Float64}:
 0.318927  0.768507  0.721524  0.753618  0.135071
 0.338759  0.111292  0.16003   0.133229  0.741106
 0.342314  0.120201  0.118446  0.113154  0.123823</code></pre><p>See <a href="../FL/#Confidence-Weighted-Mean-Reversion-(CWMR)">Confidence Weighted Mean Reversion (CWMR)</a> for more informaton and examples.</p><p><strong>References</strong></p><blockquote><p><a href="http://dx.doi.org/10.1145/2435209.2435213">Confidence Weighted Mean Reversion Strategy for Online Portfolio Selection</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/CWMR.jl#L2-L138">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.cwogd-Tuple{AbstractMatrix, AbstractFloat, Any}" href="#OnlinePortfolioSelection.cwogd-Tuple{AbstractMatrix, AbstractFloat, Any}"><code>OnlinePortfolioSelection.cwogd</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">cwogd(
  rel_pr::AbstractMatrix,
  γ::AbstractFloat,
  H;
  bj::AbstractMatrix=diagm(ones(size(rel_pr, 1)))
)</code></pre><p>Run the CW-OGD algorithm.</p><p><strong>Positional Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: Relative price matrix where it represents proportion of the closing price to the opening price of each asset in each day.</li><li><code>γ::AbstractFloat</code>: Regular term coefficient of the basic expert&#39;s loss function.</li><li><code>H::AbstractFloat</code>: Constant for calculating step sizes.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>bj::AbstractMatrix=diagm(ones(size(rel_pr, 1)))</code>: Matrix of experts opinions. Each column of this matrix must have just one positive element == 1. and others are zero. Also, sum of each column must be equal to 1. and number of rows must be equal to number of rows of <code>rel_pr</code>.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An object of <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> type.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;GOOG&quot;];

julia&gt; startdt, enddt = &quot;2019-01-01&quot;, &quot;2019-01-10&quot;;

julia&gt; querry_open_price = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;open&quot;] for ticker in tickers];

julia&gt; open_pr = reduce(hcat, querry_open_price) |&gt; permutedims;

julia&gt; querry_close_pr = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; close_pr = reduce(hcat, querry_close_pr) |&gt; permutedims;

julia&gt; rel_pr = close_pr ./ open_pr
3×6 Matrix{Float64}:
 1.01956  0.987568  1.02581  0.994822  1.00796   1.01335
 1.01577  0.973027  1.02216  1.00413   0.997671  1.00395
 1.0288   0.976042  1.03692  0.997097  1.00016   0.993538

julia&gt; gamma = 0.1; H = 0.5;

julia&gt; model = cwogd(rel_pr, gamma, H);

julia&gt; model.b
3×5 Matrix{Float64}:
 0.333333  0.351048  0.346241  0.338507  0.350524
 0.333333  0.321382  0.309454  0.320351  0.311853
 0.333333  0.32757   0.344305  0.341142  0.337623

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p>Or using a custom matrix of experts opinions:</p><pre><code class="language-julia hljs">julia&gt; b1 = [
          0.0 1.0 0.0
          1.0 0.0 0.0
          0.0 0.0 1.0
        ]

julia&gt; model = cwogd(rel_pr, gamma, H, bj=b1);

julia&gt; model.b
3×6 Matrix{Float64}:
 0.333333  0.329802  0.347517  0.34271   0.334976  0.346992
 0.333333  0.322351  0.3104    0.298472  0.309369  0.300871
 0.333333  0.347847  0.342083  0.358819  0.355655  0.352137

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1016/j.knosys.2021.107533">[1] Combining expert weights for online portfolio selection based on the gradient descent algorithm.</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/CW-OGD.jl#L59-L142">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.dmr" href="#OnlinePortfolioSelection.dmr"><code>OnlinePortfolioSelection.dmr</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">dmr(
  x::AbstractMatrix,
  horizon::Integer,
  α::Union{Nothing, AbstractVector{&lt;:AbstractFloat}},
  n::Integer,
  w::Integer,
  η::AbstractFloat=0.
)</code></pre><p>Run Distributed Mean Reversion (DMR) strategy.</p><p><strong>Arguments</strong></p><ul><li><code>x::AbstractMatrix</code>: A matrix of asset price relatives.</li><li><code>horizon::Integer</code>: Investment horizon.</li><li><code>α::Union{Nothing, AbstractVector{&lt;:AbstractFloat}}</code>: Vector of step sizes. If <code>nothing</code> is passed, the algorithm itself determines the values.</li><li><code>w::Integer</code>: Window size.</li><li><code>η::AbstractFloat=0.</code>: Threshold.</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An object of type <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; assets = [
         &quot;MSFT&quot;, &quot;META&quot;, &quot;GOOG&quot;, &quot;AAPL&quot;, &quot;AMZN&quot;, &quot;TSLA&quot;, &quot;NVDA&quot;, &quot;PYPL&quot;, &quot;ADBE&quot;, &quot;NFLX&quot;, &quot;MMM&quot;, &quot;ABT&quot;, &quot;ABBV&quot;, &quot;ABMD&quot;, &quot;ACN&quot;, &quot;ATVI&quot;, &quot;ADSK&quot;, &quot;ADP&quot;, &quot;AZN&quot;, &quot;AMGN&quot;, &quot;AVGO&quot;, &quot;BA&quot;
       ]

julia&gt; querry = [get_prices(ticker, startdt=&quot;2020-01-01&quot;, enddt=&quot;2021-01-01&quot;)[&quot;adjclose&quot;] for ticker=assets]

julia&gt; prices = stack(querry, dims=1)

julia&gt; x = prices[:, 2:end]./prices[:, 1:end-1]

julia&gt; eta = 0.

julia&gt; alpha = nothing

julia&gt; n = 10

julia&gt; w = 4

julia&gt; horizon = 50

julia&gt; model = dmr(x, horizon, alpha, n, w, eta);

julia&gt; model.b
22×50 Matrix{Float64}:
 0.0454545  0.0910112   0.0909008    …  0.0907232    0.090959     0.0909736
 0.0454545  0.00706777  0.00706777      0.00706777   0.00706777   0.0978817
 0.0454545  0.0954079   0.095159        0.00432265   0.00432265   0.0955929
 0.0454545  0.0964977   0.0962938       0.0960025    0.0967765    0.0966751
 0.0454545  0.00476753  0.0957164       0.0956522    0.0957777    0.00476753
 0.0454545  0.00550015  0.00550015   …  0.00550015   0.00550015   0.00550015
 0.0454545  0.00426904  0.0952782       0.0949815    0.0945237    0.00426904
 0.0454545  0.00317911  0.00317911      0.00317911   0.00317911   0.00317911
 0.0454545  0.0944016   0.00350562      0.00350562   0.0938131    0.00350562
 0.0454545  0.00150397  0.00150397      0.0921901    0.0918479    0.0912083
 0.0454545  0.0956671   0.0959533    …  0.0960898    0.0962863    0.0960977
 0.0454545  0.00365637  0.0945089       0.00365637   0.00365637   0.00365637
 0.0454545  0.0909954   0.000375678     0.000375678  0.000375678  0.000375678
 0.0454545  0.00487068  0.00487068      0.0958842    0.00487068   0.0951817
 0.0454545  0.0970559   0.00595991      0.096872     0.0972911    0.0973644
 0.0454545  0.00523895  0.00523895   …  0.00523895   0.00523895   0.0963758
 0.0454545  0.00764483  0.00764483      0.00764483   0.00764483   0.00764483
 0.0454545  0.0971981   0.0971457       0.0974226    0.0975877    0.0973244
 0.0454545  0.00218155  0.0930112       0.0934464    0.00218155   0.00218155
 0.0454545  0.0914433   0.0915956       0.000654204  0.000654204  0.000654204
 0.0454545  0.0937513   0.00289981   …  0.00289981   0.0937545    0.00289981
 0.0454545  0.00669052  0.00669052      0.00669052   0.00669052   0.00669052</code></pre><p><strong>Reference</strong></p><blockquote><p><a href="https://doi.org/10.1016/j.ejor.2023.11.021">Distributed mean reversion online portfolio strategy with stock network</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/DMR.jl#L50-L126">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.dricornk-Union{Tuple{M}, Tuple{T}, Tuple{Matrix{T}, Vector{T}, Vararg{M, 4}}} where {T&lt;:Float64, M&lt;:Int64}" href="#OnlinePortfolioSelection.dricornk-Union{Tuple{M}, Tuple{T}, Tuple{Matrix{T}, Vector{T}, Vararg{M, 4}}} where {T&lt;:Float64, M&lt;:Int64}"><code>OnlinePortfolioSelection.dricornk</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">dricornk(
  adj_close::Matrix{T},
  adj_close_market::Vector{T},
  horizon::M,
  k::M,
  w::M,
  p::M;
  lambda::T=1e-3,
  init_budg=1,
  progress::Bool=false
) where {T&lt;:Float64, M&lt;:Int}</code></pre><p>Run the DRICORNK algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{T}</code>: A matrix of adjusted close prices of the assets.</li><li><code>adj_close_market::Vector{T}</code>: A vector of adjusted close prices of the market in the same period.</li><li><code>horizon::M</code>: The investment horizon.</li><li><code>k::M</code>: The number of experts.</li><li><code>w::M</code>: maximum length of time window to be examined.</li><li><code>p::M</code>: maximum number of correlation coefficient thresholds.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>lambda::T=1e-3</code>: The regularization parameter.</li><li><code>init_budg=1</code>: The initial budget for investment.</li><li><code>progress::Bool=false</code>: Whether to show the progress bar.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: An object of type <code>OPSAlgorithm</code>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; stocks_adj, market_adj = rand(10, 100), rand(100);

julia&gt; m_dricornk = dricornk(stocks_adj, market_adj, 5, 2, 4, 3);

julia&gt; sum(m_dricornk.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p>See <a href="#OnlinePortfolioSelection.cornk-Union{Tuple{T}, Tuple{Matrix{Float64}, Vararg{T, 4}}} where T&lt;:Int64"><code>cornk</code></a>, and <a href="#OnlinePortfolioSelection.cornu-Union{Tuple{M}, Tuple{T}, Tuple{Matrix{T}, M, M}} where {T&lt;:Float64, M&lt;:Int64}"><code>cornu</code></a>.</p><p><strong>Reference</strong></p><blockquote><p><a href="https://www.doi.org/10.1007/978-3-030-66151-9_12">DRICORN-K: A Dynamic RIsk CORrelation-driven Non-parametric Algorithm for Online Portfolio Selection</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/DRICORNK.jl#L1-L51">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.eg-Tuple{AbstractMatrix}" href="#OnlinePortfolioSelection.eg-Tuple{AbstractMatrix}"><code>OnlinePortfolioSelection.eg</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">eg(rel_pr::AbstractMatrix; eta::AbstractFloat=0.05)</code></pre><p>Run Exponential Gradient (EG) algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: Historical relative prices.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>eta::AbstractFloat=0.05</code>: Learning rate.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; typeof(rel_pr), size(rel_pr)
(Matrix{Float64}, (3, 10))

julia&gt; m_eg = eg(rel_pr);

julia&gt; m_eg.b
3×10 Matrix{Float64}:
 0.333333  0.334092  0.325014  0.331234  0.314832  0.324674  0.326467  0.357498  0.353961  0.340167
 0.333333  0.345278  0.347718  0.337116  0.359324  0.363286  0.36466   0.348263  0.345386  0.355034
 0.333333  0.32063   0.327267  0.331649  0.325843  0.31204   0.308873  0.294239  0.300652  0.304799

julia&gt; sum(m_eg.b, dims=1) .|&gt; isapprox(1.0) |&gt; all
true</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://onlinelibrary.wiley.com/doi/10.1111/1467-9965.00058">On-Line Portfolio Selection Using Multiplicative Updates</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/EG.jl#L1-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.egm" href="#OnlinePortfolioSelection.egm"><code>OnlinePortfolioSelection.egm</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">egm(rel_pr::AbstractMatrix, model::EGMFramework, η::AbstractFloat=0.05)</code></pre><p>Run the Exponential Gradient with Momentum (EGM) algorithm. This framework contains three variants: <a href="../types/#OnlinePortfolioSelection.EGE"><code>EGE</code></a>, <a href="../types/#OnlinePortfolioSelection.EGR"><code>EGR</code></a> and <a href="../types/#OnlinePortfolioSelection.EGA"><code>EGA</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: matrix of size <code>n_assets</code> by <code>n_periods</code> containing the relative prices.</li><li><code>model::EGMFramework</code>: EGM framework. <a href="../types/#OnlinePortfolioSelection.EGE"><code>EGE</code></a>, <a href="../types/#OnlinePortfolioSelection.EGR"><code>EGR</code></a> or <a href="../types/#OnlinePortfolioSelection.EGA"><code>EGA</code></a> can be used.</li><li><code>η::AbstractFloat=0.05</code>: learning rate.</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;GOOG&quot;];

julia&gt; querry = [get_prices(ticker, startdt=&quot;2019-01-01&quot;, enddt=&quot;2019-01-12&quot;)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; prices = stack(querry) |&gt; permutedims;

julia&gt; rel_pr = prices[:, 2:end]./prices[:, 1:end-1]
3×7 Matrix{Float64}:
 0.900393  1.04269  0.997774  1.01906  1.01698   1.0032    0.990182
 0.963212  1.04651  1.00128   1.00725  1.0143    0.993574  0.992278
 0.971516  1.05379  0.997833  1.00738  0.998495  0.995971  0.987723

julia&gt; # EGE variant
julia&gt; variant = EGE(0.5)

julia&gt; model = egm(rel_pr, variant);

julia&gt; model.b
3×7 Matrix{Float64}:
 0.333333  0.33294   0.332704  0.332576  0.332576  0.332634  0.332711
 0.333333  0.333493  0.333564  0.333619  0.333614  0.333647  0.33363
 0.333333  0.333567  0.333732  0.333805  0.33381   0.333719  0.333659

julia&gt; # EGR variant
julia&gt; variant = EGR(0.)

julia&gt; model = egm(rel_pr, variant);

julia&gt; model.b
3×7 Matrix{Float64}:
 0.333333  0.348653  0.350187  0.350575  0.348072  0.345816  0.344006
 0.333333  0.327     0.327299  0.326573  0.327852  0.326546  0.327824
 0.333333  0.324347  0.322514  0.322853  0.324077  0.327638  0.328169

julia&gt; # EGA variant
julia&gt; variant = EGA(0.5, 0.)

julia&gt; model = egm(rel_pr, variant);

julia&gt; model.b
3×7 Matrix{Float64}:
 0.333333  0.349056  0.350429  0.350706  0.348071  0.345757  0.343929
 0.333333  0.326833  0.327223  0.326516  0.327857  0.326514  0.327842
 0.333333  0.324111  0.322348  0.322779  0.324072  0.327729  0.328229</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1016/j.eswa.2021.115889">Exponential Gradient with Momentum for Online Portfolio Selection</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/EGM.jl#L119-L184">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.gwr" href="#OnlinePortfolioSelection.gwr"><code>OnlinePortfolioSelection.gwr</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">gwr(
  prices::AbstractMatrix,
  horizon::Integer,
  τ::Real=2.8,
  𝛿::Integer=50,
  ϵ::AbstractFloat=0.005
)

gwr(
  prices::AbstractMatrix,
  horizon::Integer,
  τ::AbstractVector{&lt;:Real},
  𝛿::Integer=50,
  ϵ::AbstractFloat=0.005
)</code></pre><p>Run the Gaussian Weighting Reversion (GWR) Strategy.</p><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>prices</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Method 1</strong></p><p>Run &#39;GWR&#39; variant.</p><p><strong>Arguments</strong></p><ul><li><code>prices::AbstractMatrix</code>: Matrix of prices.</li><li><code>horizon::Integer</code>: The investment horizon.</li><li><code>τ::Real=2.8</code>: The parameter of gaussian function.</li><li><code>𝛿::Integer=50</code>: Hyperparameter.</li><li><code>ϵ::AbstractFloat=0.005</code>: A parameter to control the weighted range.</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;MSFT&quot;, &quot;GOOG&quot;, &quot;META&quot;];

julia&gt; querry = [get_prices(ticker, startdt=&quot;2020-01-01&quot;, enddt=&quot;2020-01-23&quot;)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; prices = stack(querry, dims=1)
3×14 Matrix{Float64}:
 154.78    152.852  153.247   151.85   154.269  156.196   155.473   157.343   156.235  157.246  160.128  161.024   160.446  159.675
  68.3685   68.033   69.7105   69.667   70.216   70.9915   71.4865   71.9615   71.544   71.96    72.585   74.0195   74.22    74.2975
 209.78    208.67   212.6     213.06   215.22   218.3     218.06    221.91    219.06   221.15   221.77   222.14    221.44   221.32

julia&gt; h = 3

julia&gt; model = gwr(prices, h);

julia&gt; model.b
3×3 Matrix{Float64}:
 0.333333  0.333333  1.4095e-11
 0.333333  0.333333  0.0
 0.333333  0.333333  1.0</code></pre><p><strong>Method 2</strong></p><p>Run &#39;GWR-A&#39; variant.</p><p><strong>Arguments</strong></p><ul><li><code>prices::AbstractMatrix</code>: Matrix of prices.</li><li><code>horizon::Integer</code>: The investment horizon.</li><li><code>τ::AbstractVector{&lt;:Real}</code>: The parameters of gaussian function.</li><li><code>𝛿::Integer=50</code>: Hyperparameter.</li><li><code>ϵ::AbstractFloat=0.005</code>: A parameter to control the weighted range.</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;MSFT&quot;, &quot;GOOG&quot;, &quot;META&quot;];

julia&gt; querry = [get_prices(ticker, startdt=&quot;2020-01-01&quot;, enddt=&quot;2020-01-23&quot;)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; prices = stack(querry, dims=1)
3×14 Matrix{Float64}:
 154.78    152.852  153.247   151.85   154.269  156.196   155.473   157.343   156.235  157.246  160.128  161.024   160.446  159.675
  68.3685   68.033   69.7105   69.667   70.216   70.9915   71.4865   71.9615   71.544   71.96    72.585   74.0195   74.22    74.2975
 209.78    208.67   212.6     213.06   215.22   218.3     218.06    221.91    219.06   221.15   221.77   222.14    221.44   221.32

julia&gt; h = 3

julia&gt; model = gwr(prices, h, [2, 3, 4]);

julia&gt; model.b
3×3 Matrix{Float64}:
 0.333333  0.0  1.20769e-11
 0.333333  0.0  0.0
 0.333333  1.0  1.0</code></pre><p><strong>Reference</strong></p><blockquote><p><a href="https://doi.org/10.1109/TSP.2019.2941067">Gaussian Weighting Reversion Strategy for Accurate On-line Portfolio Selection</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/GWR.jl#L106-L206">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.ir-Union{Tuple{S}, Tuple{AbstractMatrix{S}, AbstractMatrix{S}, AbstractVector{S}}} where S&lt;:AbstractFloat" href="#OnlinePortfolioSelection.ir-Union{Tuple{S}, Tuple{AbstractMatrix{S}, AbstractMatrix{S}, AbstractVector{S}}} where S&lt;:AbstractFloat"><code>OnlinePortfolioSelection.ir</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ir(
  weights::AbstractMatrix{S},
  rel_pr::AbstractMatrix{S},
  rel_pr_market::AbstractVector{S};
  init_inv::S=1.
) where S&lt;:AbstractFloat</code></pre><p>Calculate the Information Ratio (IR) of portfolio. Also, see <a href="#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>, <a href="#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat"><code>mer</code></a>, <a href="#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a>, <a href="#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a>, <a href="#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a>, <a href="#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a>, <a href="#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a>, and <a href="#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a>.</p><p>The formula for calculating the Information Ratio (IR) of portfolio is as follows:</p><p class="math-container">\[IR = \frac{{{{\bar R}_s} - {{\bar R}_m}}}{{\sigma \left( {{R_s} - {R_m}} \right)}}\]</p><p>where <span>$R_s$</span> represents the portfolio&#39;s daily return, <span>$R_m$</span> represents the market&#39;s daily return, <span>$\bar R_s$</span> represents the portfolio&#39;s average daily return, <span>$\bar R_m$</span> represents the market&#39;s average daily return, and <span>$\sigma$</span> represents the standard deviation of the portfolio&#39;s daily excess return over the market. Note that in this package, the logarithmic return is used.</p><p><strong>Arguments</strong></p><ul><li><code>weights::AbstractMatrix{S}</code>: the weights of the portfolio.</li><li><code>rel_pr::AbstractMatrix{S}</code>: the relative price of the stocks.</li><li><code>rel_pr_market::AbstractVector{S}</code>: the relative price of the market.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>init_inv::S=1</code>: the initial investment.</li></ul><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The size of <code>weights</code> and <code>rel_pr</code> must be <code>(n_stocks, n_periods)</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If <code>size(rel_pr, 2)</code> is greater than <code>size(weights, 2)</code>, then the last <code>size(weights, 2)</code> columns of <code>rel_pr</code> will be used. The size of <code>rel_pr_market</code> will automatically be adjusted to the size of <code>w</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::AbstractFloat</code>: the Information Ratio (IR) of portfolio for the investment period.</li></ul><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1007/s10878-021-00800-7">Adaptive online portfolio strategy based on exponential gradient updates</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Tools/metrics.jl#L132-L169">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.load-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, T, S, S, T}} where {T&lt;:Float64, S&lt;:Int64}" href="#OnlinePortfolioSelection.load-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, T, S, S, T}} where {T&lt;:Float64, S&lt;:Int64}"><code>OnlinePortfolioSelection.load</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">load(adj_close::AbstractMatrix{T}, α::T, ω::S, horizon::S, η::T, ϵ::T=1.5) where {T&lt;:Float64, S&lt;:Int}</code></pre><p>Run LOAD algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::AbstractMatrix{T}</code>: Adjusted close price data.</li><li><code>α::T</code>: Decay factor. (0 &lt; α &lt; 1)</li><li><code>ω::S</code>: Window size. (ω &gt; 0)</li><li><code>horizon::S</code>: Investment horizon. (n_periods &gt; horizon &gt; 0)</li><li><code>η::T</code>: Threshold value. (η &gt; 0)</li><li><code>ϵ::T=1.5</code>: Expected return threshold value.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An object of type <code>OPSAlgorithm</code> containing the weights of each asset for each period.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs"># Get data
julia&gt; using YFinance
julia&gt; startdt, enddt = &quot;2022-04-01&quot;, &quot;2023-04-27&quot;;
julia&gt; querry = [
          get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker in tickers
       ];
julia&gt; prices = reduce(hcat, querry);
julia&gt; prices = permutedims(prices);

julia&gt; using OnlinePortfolioSelection

julia&gt; model = load(prices, 0.5, 30, 5, 0.1);

julia&gt; model.b
5×5 Matrix{Float64}:
 0.2  2.85298e-8  0.0        0.0       0.0
 0.2  0.455053    0.637299   0.694061  0.653211
 0.2  0.215388    0.0581291  0.0       0.0
 0.2  0.329559    0.304572   0.305939  0.346789
 0.2  6.06128e-9  0.0        0.0       0.0

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1016/j.knosys.2019.104958">A local adaptive learning system for online portfolio selection</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/LOAD.jl#L124-L172">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.maeg-Tuple{AbstractMatrix, Integer, AbstractVector}" href="#OnlinePortfolioSelection.maeg-Tuple{AbstractMatrix, Integer, AbstractVector}"><code>OnlinePortfolioSelection.maeg</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">maeg(x::AbstractMatrix, w::Integer, H::AbstractVector)</code></pre><p>Run Moving-window-based Adaptive Exponential Gradient (MAEG) algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>x::AbstractMatrix</code>: A matrix of price relatives of <code>n_assets</code> over <code>n_periods</code>.</li><li><code>w::Integer</code>: The window size.</li><li><code>H::AbstractVector</code>: A vector of learning rates.</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>x</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; rel_pr = rand(4, 10);

julia&gt; w = 3;

julia&gt; H = [0.01, 0.02, 0.2];

julia&gt; m = maeg(rel_pr, w, H);

julia&gt; m.b
4×10 Matrix{Float64}:
 0.25  0.250307  0.25129   0.251673  0.250823  0.267687  0.313794  0.319425  0.378182  0.427249
 0.25  0.249138  0.248921  0.249289  0.250482  0.23192   0.202576  0.179329  0.160005  0.168903
 0.25  0.250026  0.250656  0.24931   0.24995   0.226647  0.237694  0.237879  0.216076  0.192437
 0.25  0.250528  0.249134  0.249728  0.248744  0.273746  0.245936  0.263367  0.245737  0.211411</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1007/s10878-021-00800-7">Adaptive online portfolio strategy based on exponential gradient updates</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/MAEG.jl#L7-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.mdd</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mdd(Sn::AbstractVector{T}) where T&lt;:AbstractFloat</code></pre><p>Calculate the Maximum Drawdown (MDD) of investment. Also, see <a href="#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>, <a href="#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat"><code>mer</code></a>, <a href="#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a>, <a href="#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a>, <a href="#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a>, <a href="#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a>, and <a href="#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>Sn::AbstractVector{T}</code>: the cumulative wealth of investment during the investment period. see <a href="#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>.</li></ul><p><strong>Returns</strong></p><ul><li><code>::AbstractFloat</code>: the MDD of investment.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Tools/metrics.jl#L250-L260">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.mer</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mer(
  weights::AbstractMatrix{T},
  rel_pr::AbstractMatrix{T},
  𝘷::T=0.
) where T&lt;:AbstractFloat</code></pre><p>Calculate the investments&#39;s Mean excess return (MER). Also, see <a href="#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>, <a href="#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a>, <a href="#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a>, <a href="#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a>, <a href="#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a>, <a href="#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a>, and <a href="#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>weights::AbstractMatrix{T}</code>: the weights of the portfolio.</li><li><code>rel_pr::AbstractMatrix{T}</code>: the relative price of the stocks.</li><li><code>𝘷::T=0.</code>: the transaction cost rate.</li></ul><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The size of <code>weights</code> and <code>rel_pr</code> must be <code>(n_stocks, n_periods)</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If <code>size(rel_pr, 2)</code> is greater than <code>size(weights, 2)</code>, then the last <code>size(weights, 2)</code> columns of <code>rel_pr</code> will be used.</p></div></div><p><strong>Returns</strong></p><ul><li><code>MER::AbstractFloat</code>: the investments&#39;s Mean excess return (MER).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Tools/metrics.jl#L85-L107">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.mrvol-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, S, S, S, T, T}} where {T&lt;:AbstractFloat, S&lt;:Integer}" href="#OnlinePortfolioSelection.mrvol-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, S, S, S, T, T}} where {T&lt;:AbstractFloat, S&lt;:Integer}"><code>OnlinePortfolioSelection.mrvol</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mrvol(
  rel_pr::AbstractMatrix{T},
  rel_vol::AbstractMatrix{T},
  horizon::S,
  Wₘᵢₙ::S,
  Wₘₐₓ::S,
  λ::T,
  η::T
) where {T&lt;:AbstractFloat, S&lt;:Integer}</code></pre><p>Run MRvol algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix{T}</code>: Relative price matrix where it represents proportion of the closing price to the opening price of each asset in each day.</li><li><code>rel_vol::AbstractMatrix{T}</code>: Relative volume matrix where 𝘷ᵢⱼ represents the tᵗʰ trading volume of asset 𝑖 divided by the (t - 1)ᵗʰ trading volume of asset 𝑖.</li><li><code>horizon::S</code>: Investment horizon. The last <code>horizon</code> days of the data will be used to run the algorithm.</li><li><code>Wₘᵢₙ::S</code>: Minimum window size.</li><li><code>Wₘₐₓ::S</code>: Maximum window size.</li><li><code>λ::T</code>: Trade-off parameter in the loss function.</li><li><code>η::T</code>: Learning rate.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> and <code>rel_vol</code> should be matrixes of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;GOOG&quot;];

julia&gt; startdt, enddt = &quot;2019-01-01&quot;, &quot;2020-01-01&quot;;

julia&gt; querry_open_price = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;open&quot;] for ticker in tickers];

julia&gt; open_pr = reduce(hcat, querry_open_price) |&gt; permutedims;

julia&gt; querry_close_pr = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; close_pr = reduce(hcat, querry_close_pr) |&gt; permutedims;

julia&gt; querry_vol = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;vol&quot;] for ticker in tickers];

julia&gt; vol = reduce(hcat, querry_vol) |&gt; permutedims;

julia&gt; rel_pr = (close_pr ./ open_pr)[:, 2:end];

julia&gt; rel_vol = vol[:, 2:end] ./ vol[:, 1:end-1];

julia&gt; size(rel_pr) == size(rel_vol)
true

julia&gt; horizon = 100; Wₘᵢₙ = 4; Wₘₐₓ = 10; λ = 0.05; η = 0.01;

julia&gt; r = mrvol(rel_pr, rel_vol, horizon, Wₘᵢₙ, Wₘₐₓ, λ, η);

julia&gt; r.b
3×100 Matrix{Float64}:
 0.333333  0.0204062  0.0444759  …  0.38213   0.467793
 0.333333  0.359864   0.194139      0.213264  0.281519
 0.333333  0.61973    0.761385      0.404606  0.250689</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1016/j.eswa.2023.121472">Online portfolio selection of integrating expert strategies based on mean reversion and trading volume.</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/MRvol.jl#L257-L325">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.oldem-Union{Tuple{T}, Tuple{S}, Tuple{AbstractMatrix, S, S, S, S, T, T, T}} where {S&lt;:Integer, T&lt;:AbstractFloat}" href="#OnlinePortfolioSelection.oldem-Union{Tuple{T}, Tuple{S}, Tuple{AbstractMatrix, S, S, S, S, T, T, T}} where {S&lt;:Integer, T&lt;:AbstractFloat}"><code>OnlinePortfolioSelection.oldem</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">oldem(
  rel_pr::AbstractMatrix,
  horizon::S,
  w::S,
  L::S,
  s::S,
  σ::T,
  ξ::T,
  γ::T;
  bt::AbstractVector = ones(size(rel_pr, 1))/size(rel_pr, 1)
) where {S&lt;:Integer, T&lt;:AbstractFloat}</code></pre><p>Run Online Low Dimension Ensemble Method (OLDEM).</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: A matrix of size <code>n_assets</code> × <code>T</code> containing the price relatives of assets.</li><li><code>horizon::S</code>: Investment horizon.</li><li><code>w::S</code>: Window size.</li><li><code>L::S</code>: Number of subsystems.</li><li><code>s::S</code>: Number of assets in each subsystem.</li><li><code>σ::T</code>: Kernel bandwidth.</li><li><code>ξ::T</code>: tradeoff parameter.</li><li><code>γ::T</code>: tradeoff parameter.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>bt::AbstractVector</code>: A vector of length <code>n_assets</code> containing the initial portfolio weights. Presumebly, the initial portfolio portfolio is the equally weighted portfolio. However, one can use any other portfolio weights that satisfy the following condition: <span>$\sum_{i=1}^{n\_assets} b_{i} = 1$</span>.</li><li><code>progress::Bool=false</code>: Show the progress bar.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An object of type <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;MSFT&quot;, &quot;TSLA&quot;, &quot;AAPL&quot;, &quot;META&quot;, &quot;MMM&quot;];

julia&gt; querry = [
         get_prices(ticker, startdt=&quot;2020-01-01&quot;, enddt=&quot;2020-01-15&quot;)[&quot;adjclose&quot;]
         for ticker in tickers
       ];

julia&gt; prices = stack(querry) |&gt; permutedims;

julia&gt; x = prices[:, 2:end]./prices[:, 1:end-1]
5×8 Matrix{Float64}:
 0.987548  1.00259  0.990882  1.01593  1.01249   0.995373  1.01202  0.992957
 1.02963   1.01925  1.0388    1.0492   0.978055  0.993373  1.09769  1.02488
 0.990278  1.00797  0.995297  1.01609  1.02124   1.00226   1.02136  0.986497
 0.994709  1.01883  1.00216   1.01014  1.01431   0.998901  1.01766  0.987157
 0.991389  1.00095  0.995969  1.01535  1.00316   0.995971  1.00249  1.00249

julia&gt; σ = 0.025;
julia&gt; w = 2;
julia&gt; h = 4;
julia&gt; L = 4;
julia&gt; s = 3;

julia&gt; model = oldem(x, h, w, L, s, σ, 0.002, 0.25);

julia&gt; model.b
5×4 Matrix{Float64}:
 0.2  1.99964e-8  1.0         0.0
 0.2  1.0         0.0         0.0
 0.2  0.0         0.0         1.99964e-8
 0.2  0.0         0.0         1.0
 0.2  0.0         1.99964e-8  0.0</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1016/j.patcog.2023.109872">Online portfolio selection with predictive instantaneous risk assessment</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/OLDEM.jl#L535-L610">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.olmar-Tuple{AbstractMatrix, Int64, Int64, Int64}" href="#OnlinePortfolioSelection.olmar-Tuple{AbstractMatrix, Int64, Int64, Int64}"><code>OnlinePortfolioSelection.olmar</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">olmar(rel_pr::AbstractMatrix, horizon::Int, ω::Int, ϵ::Int)
olmar(rel_pr::AbstractMatrix, horizon::Int, ω::AbstractVector{&lt;:Int}, ϵ::Int)</code></pre><p><strong>Method 1</strong></p><p>Run the Online Moving Average Reversion algorithm (OLMAR).</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: Matrix of relative prices.</li><li><code>horizon::Int</code>: Investment horizon.</li><li><code>ω::Int</code>: Window size.</li><li><code>ϵ::Int</code>: Reversion threshold.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;AMZN&quot;, &quot;GOOG&quot;, &quot;META&quot;];

julia&gt; startdt, enddt = &quot;2019-01-01&quot;, &quot;2020-01-01&quot;

julia&gt; querry = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; prices = stack(querry) |&gt; permutedims;

julia&gt; rel_pr = prices[:, 2:end]./prices[:, 1:end-1];

julia&gt; horizon = 5;
julia&gt; windows = 3;
julia&gt; epsilon = 4;

julia&gt; m_olmar = olmar(rel_pr, horizon, windows, epsilon);

julia&gt; m_olmar.b
5×5 Matrix{Float64}:
 0.2  1.0         0.484825  1.97835e-8  0.0
 0.2  1.95724e-8  0.515175  0.0         0.0
 0.2  0.0         0.0       1.0         1.0
 0.2  0.0         0.0       0.0         0.0
 0.2  0.0         0.0       0.0         1.9851e-8

julia&gt; all(sum(m_olmar.b, dims=1) .≈ 1.0)
true</code></pre><p><strong>Method 2</strong></p><p>Run BAH(OLMAR) algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: Matrix of relative prices.</li><li><code>horizon::Int</code>: Investment horizon.</li><li><code>ω::AbstractVector{&lt;:Int}</code>: Window sizes.</li><li><code>ϵ::Int</code>: Reversion threshold.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;AMZN&quot;, &quot;GOOG&quot;, &quot;META&quot;];

julia&gt; startdt, enddt = &quot;2019-01-01&quot;, &quot;2020-01-01&quot;

julia&gt; querry = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; prices = stack(querry) |&gt; permutedims;

julia&gt; rel_pr = prices[:, 2:end]./prices[:, 1:end-1];

julia&gt; horizon = 5;
julia&gt; windows = [3, 5, 7];
julia&gt; epsilon = 4;

julia&gt; model = olmar(rel_pr, horizon, windows, epsilon);

julia&gt; model.b
5×5 Matrix{Float64}:
 0.2  0.2  0.333333    0.162297  1.33072e-8
 0.2  0.2  1.31177e-8  0.555158  0.0
 0.2  0.2  6.57906e-9  0.0       0.667358
 0.2  0.2  0.0         0.0       0.332642
 0.2  0.2  0.666667    0.282545  0.0</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.48550/arXiv.1206.4626">On-Line Portfolio Selection with Moving Average Reversion</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/OLMAR.jl#L1-L98">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.ons" href="#OnlinePortfolioSelection.ons"><code>OnlinePortfolioSelection.ons</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">ons(rel_pr::AbstractMatrix, β::Integer=1, 𝛿::AbstractFloat=1/8, η::AbstractFloat=0.)</code></pre><p>Run Online Newton Step (ONS) algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: relative prices.</li><li><code>β::Integer=1</code>: Hyperparameter.</li><li><code>𝛿::AbstractFloat=1/8</code>: Heuristic tuning parameter.</li><li><code>η::AbstractFloat=0.</code>: Learning rate.</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;GOOG&quot;];

julia&gt; querry = [get_prices(ticker, startdt=&quot;2020-01-01&quot;, enddt=&quot;2020-01-12&quot;)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; prices = stack(querry, dims=1);

julia&gt; rel_pr = prices[:, 2:end]./prices[:, 1:end-1];

julia&gt; model = ons(rel_pr, 1, 0.005, 0.1);

julia&gt; model.b
3×6 Matrix{Float64}:
 0.333333  0.333327  0.333293  0.333295  0.333319  0.333375
 0.333333  0.333302  0.333221  0.333182  0.333205  0.333184
 0.333333  0.333371  0.333486  0.333524  0.333475  0.333441</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1145/1143844.1143846">Algorithms for Portfolio Management based on the Newton Method</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/ONS.jl#L38-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.opsmethods-Tuple{}" href="#OnlinePortfolioSelection.opsmethods-Tuple{}"><code>OnlinePortfolioSelection.opsmethods</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">opsmethods()</code></pre><p>Print the available algorithms in the package.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; opsmethods()

      ===== OnlinePortfolioSelection.jl =====
            Currently available methods
       =====================================

        up: Universal Portfolio - Call `up`
        eg: Exponential Gradient - Call `eg`
     cornu: CORN-U - Call `cornu`
          ⋮</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/OnlinePortfolioSelection.jl#L76-L96">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}" href="#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>OnlinePortfolioSelection.opsmetrics</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">opsmetrics(
  weights::AbstractMatrix{T},
  rel_pr::AbstractMatrix{T},
  rel_pr_market::AbstractVector{T};
  init_inv::T=1.,
  Rf::T=0.02
  dpy::S=252,
  v::T=0.
  dpy::S=252
) where {T&lt;:AbstractFloat, S&lt;:Int}</code></pre><p>Calculate the metrics of an OPS algorithm. Also, see <a href="#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>, <a href="#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat"><code>mer</code></a>, <a href="#OnlinePortfolioSelection.ir-Union{Tuple{S}, Tuple{AbstractMatrix{S}, AbstractMatrix{S}, AbstractVector{S}}} where S&lt;:AbstractFloat"><code>ir</code></a>, <a href="#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a>, <a href="#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a>, <a href="#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a>, <a href="#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a>, and <a href="#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>weights::AbstractMatrix{T}</code>: the weights of the portfolio.</li><li><code>rel_pr::AbstractMatrix{T}</code>: the relative price of the stocks.</li><li><code>rel_pr_market::AbstractVector{T}</code>: the relative price of the market.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>init_inv::T=1</code>: the initial investment.</li><li><code>Rf::T=0.02</code>: the risk-free rate of return.</li><li><code>dpy::S=252</code>: the number of days in a year.</li><li><code>v::T=0.</code>: the transaction cost rate.</li></ul><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The size of <code>weights</code> and <code>rel_pr</code> must be <code>(n_stocks, n_periods)</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If <code>size(rel_pr, 2)</code> is greater than <code>size(weights, 2)</code>, then the last <code>size(weights, 2)</code> columns of <code>rel_pr</code> will be used.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSMetrics</code>: An <a href="../types/#OnlinePortfolioSelection.OPSMetrics"><code>OPSMetrics</code></a> object.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Tools/metrics.jl#L313-L346">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.pamr-Tuple{AbstractMatrix, AbstractFloat, OnlinePortfolioSelection.PAMRModel}" href="#OnlinePortfolioSelection.pamr-Tuple{AbstractMatrix, AbstractFloat, OnlinePortfolioSelection.PAMRModel}"><code>OnlinePortfolioSelection.pamr</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">pamr(rel_pr::AbstractMatrix, ϵ::AbstractFloat, C::AbstractFloat, model::PAMRModel)</code></pre><p>Run the PAMR algorithm on the matrix of relative prices <code>rel_pr</code>.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: matrix of relative prices.</li><li><code>ϵ::AbstractFloat</code>: Sensitivity parameter.</li><li><code>C::AbstractFloat</code>: Aggressiveness parameter.</li><li><code>model::PAMRModel</code>: PAMR model to use. All three variants, namely, <code>PAMR()</code>, <code>PAMR1()</code>, and <code>PAMR2()</code> are supported.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_price</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Output</strong></p><ul><li><code>::OPSAlgorithm</code>: An object of type <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;AMZN&quot;, &quot;META&quot;, &quot;GOOG&quot;]

julia&gt; startdt, enddt = &quot;2019-01-01&quot;, &quot;2020-01-01&quot;

julia&gt; querry = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker in tickers]

julia&gt; prices = stack(querry) |&gt; permutedims

julia&gt; rel_pr =  prices[:, 2:end]./prices[:, 1:end-1]

julia&gt; model = PAMR()

julia&gt; eps = 0.01

julia&gt; result = pamr(rel_pr, eps, model)

julia&gt; result.b
5×251 Matrix{Float64}:
 0.2  0.224672  0.22704   0.230855  0.229743  …  0.0966823  0.0966057  0.0900667
 0.2  0.196884  0.197561  0.199825  0.203945     0.172787   0.171734   0.171626
 0.2  0.191777  0.190879  0.178504  0.178478     0.290126   0.289638   0.291135
 0.2  0.193456  0.193855  0.196363  0.189322     0.182514   0.181609   0.185527
 0.2  0.193211  0.190665  0.194453  0.198513     0.25789    0.260414   0.261645

julia&gt; sum(result.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p>In the same way, you can use <code>PAMR1()</code> and <code>PAMR2()</code>:</p><pre><code class="language-julia hljs">julia&gt; model = PAMR1(C=0.02)

julia&gt; eps = 0.01

julia&gt; result = pamr(rel_pr, eps, model)

julia&gt; result.b
5×251 Matrix{Float64}:
 0.2  0.200892  0.200978  0.201116  …  0.196264  0.19626   0.196257  0.19602
 0.2  0.199887  0.199912  0.199994     0.198835  0.199017  0.198979  0.198975
 0.2  0.199703  0.19967   0.199223     0.203659  0.203261  0.203243  0.203297
 0.2  0.199763  0.199778  0.199868     0.199246  0.199351  0.199319  0.19946
 0.2  0.199754  0.199662  0.199799     0.201997  0.20211   0.202202  0.202246

julia&gt; model = PAMR2(C=1.)

julia&gt; eps = 0.01

julia&gt; result = pamr(rel_pr, eps, model)

julia&gt; result.b
5×251 Matrix{Float64}:
 0.2  0.219093  0.220963  0.223948  …  0.119093  0.119013  0.118953  0.11385
 0.2  0.197589  0.198123  0.199895     0.175224  0.179199  0.178376  0.178291
 0.2  0.193636  0.192928  0.183242     0.279176  0.27052   0.270138  0.271307
 0.2  0.194936  0.19525   0.197214     0.183626  0.185922  0.185215  0.188272
 0.2  0.194746  0.192736  0.195701     0.242882  0.245346  0.247319  0.248279</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://www.doi.org/10.1007/s10994-012-5281-z">PAMR: Passive aggressive mean reversion strategy for portfolio selection</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/PAMR.jl#L1-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.ppt" href="#OnlinePortfolioSelection.ppt"><code>OnlinePortfolioSelection.ppt</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">ppt(
  prices::AbstractMatrix,
  w::Int,
  ϵ::Int,
  horizon::Int,
  b̂ₜ::AbstractVector=ones(size(prices, 1))/size(prices, 1)
)</code></pre><p>Run the Price Peak Tracking (PPT) algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>prices::AbstractMatrix</code>: Matrix of prices.</li><li><code>w::Int</code>: Window size.</li><li><code>ϵ::Int</code>: Constraint parameter.</li><li><code>horizon::Int</code>: Number of days to run the algorithm.</li><li><code>b̂ₜ::AbstractVector=ones(size(prices, 1))/size(prices, 1)</code>: Initial weights.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>prices</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Output</strong></p><ul><li><code>::OPSAlgorithm</code>: An object of type <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;AMZN&quot;, &quot;GOOG&quot;, &quot;MSFT&quot;];

julia&gt; querry = [get_prices(ticker, startdt=&quot;2019-01-01&quot;, enddt=&quot;2020-01-01&quot;)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; prices = stack(querry) |&gt; permutedims;

julia&gt; model = ppt(prices, 10, 100, 100);

julia&gt; sum(model, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1109/TNNLS.2017.2705658">A Peak Price Tracking-Based Learning System for Portfolio Selection</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/PPT.jl#L1-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.rmr-Tuple{AbstractMatrix, Integer, Integer, Any, Any, Any}" href="#OnlinePortfolioSelection.rmr-Tuple{AbstractMatrix, Integer, Integer, Any, Any, Any}"><code>OnlinePortfolioSelection.rmr</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">rmr(p::AbstractMatrix, horizon::Integer, w::Integer, ϵ, m, τ)</code></pre><p>Run Robust Median Reversion (RMR) algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>p::AbstractMatrix</code>: Prices matrix.</li><li><code>horizon::Integer</code>: Number of periods to run the algorithm.</li><li><code>w::Integer</code>: Window size.</li><li><code>ϵ</code>: Reversion threshold.</li><li><code>m</code>: Maxmimum number of iterations.</li><li><code>τ</code>: Toleration level.</li></ul><p><strong>Returns</strong></p><ul><li><code>OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;GOOG&quot;, &quot;AAPL&quot;, &quot;MSFT&quot;, &quot;AMZN&quot;];

julia&gt; querry = [get_prices(ticker, startdt=&quot;2020-01-01&quot;, enddt=&quot;2020-01-31&quot;)[&quot;adjclose&quot;] for ticker=tickers];

julia&gt; prices = stack(querry, dims=1);

julia&gt; horizon = 5

julia&gt; window = 5

julia&gt; ϵ = 5

julia&gt; m = 7

julia&gt; τ = 1e6

julia&gt; model = rmr(prices, horizon, window, ϵ, m, τ);

julia&gt; model.b
4×5 Matrix{Float64}:
 0.25  1.0         1.0       1.0         1.0
 0.25  0.0         0.0       0.0         0.0
 0.25  0.0         0.0       0.0         0.0
 0.25  1.14513e-8  9.979e-9  9.99353e-9  1.03254e-8</code></pre><p><strong>Reference</strong></p><blockquote><p><a href="https://www.doi.org/10.1109/TKDE.2016.2563433">Robust Median Reversion Strategy for Online Portfolio Selection</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/RMR.jl#L37-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.rprt-Union{Tuple{T}, Tuple{AbstractMatrix{T}, Integer}, Tuple{AbstractMatrix{T}, Integer, Integer}, Tuple{AbstractMatrix{T}, Integer, Integer, T}, Tuple{AbstractMatrix{T}, Integer, Integer, T, Integer}, Tuple{AbstractMatrix{T}, Integer, Integer, T, Integer, Union{Nothing, AbstractVector}}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.rprt-Union{Tuple{T}, Tuple{AbstractMatrix{T}, Integer}, Tuple{AbstractMatrix{T}, Integer, Integer}, Tuple{AbstractMatrix{T}, Integer, Integer, T}, Tuple{AbstractMatrix{T}, Integer, Integer, T, Integer}, Tuple{AbstractMatrix{T}, Integer, Integer, T, Integer, Union{Nothing, AbstractVector}}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.rprt</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function rprt(
  rel_pr::AbstractMatrix{T},
  horizon::Integer,
  w::Integer=5,
  ϑ::T=0.8,
  𝜖::Integer=50,
  bₜ::Union{Nothing, AbstractVector}=nothing
) where T&lt;:AbstractFloat</code></pre><p>Run RPRT algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix{T}</code>: A <code>asset × samples</code> matrix of relative prices.</li><li><code>horizon::Integer</code>: Investment period.</li><li><code>w::Integer=5</code>: Window length.</li><li><code>ϑ::T=0.8</code>: Mixing parameter.</li><li><code>𝜖::Integer=50</code>: Expected profiting level.</li><li><code>bₜ::Union{Nothing, AbstractVector}=nothing</code>: Initial portfolio. Default value would lead to a uniform portfolio.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An object of type <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; rel_pr = rand(3, 6);
julia&gt; horizon = 2
julia&gt; window = 3
julia&gt; v = 0.2
julia&gt; eps = 10
julia&gt; b = [0.5, 0.3, 0.2];

julia&gt; m_rprt = rprt(rel_pr, horizon, window, v, eps, b);

julia&gt; m_rprt.b
3×2 Matrix{Float64}:
 0.5  1.0
 0.3  0.0
 0.2  2.03615e-10

julia&gt; sum(m_rprt.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>Reference</strong></p><blockquote><p><a href="https://ieeexplore.ieee.org/document/8411138/">Reweighted Price Relative Tracking System for Automatic Portfolio Optimization</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/RPRT.jl#L31-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.sn</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sn(weights::AbstractMatrix{T}, rel_pr::AbstractMatrix{T}; init_inv::T=1.) where T&lt;:AbstractFloat</code></pre><p>Calculate the cumulative wealth of the portfolio during a period of time. Also, see <a href="#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat"><code>mer</code></a>, <a href="#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a>, <a href="#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a>, <a href="#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a>, <a href="#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a>, <a href="#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a>, and <a href="#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a>.</p><p>The formula for calculating the cumulative wealth of the portfolio is as follows:</p><p class="math-container">\[{S_n} = {S_0}\prod\limits_{t = 1}^T {\left\langle {{b_t},{x_t}} \right\rangle }\]</p><p>where <span>$S_0$</span> is the initial budget, <span>$n$</span> is the investment horizon, <span>$b_t$</span> is the vector of weights of the period <span>$t$</span>, and <span>$x_t$</span> is the relative price of the <span>$t$</span>-th period.</p><p><strong>Arguments</strong></p><ul><li><code>weights::AbstractMatrix{T}</code>: the weights of the portfolio.</li><li><code>rel_pr::AbstractMatrix{T}</code>: the relative price of the stocks.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>init_inv::T=1</code>: the initial investment.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p>The size of <code>weights</code> and <code>rel_pr</code> must be <code>(n_stocks, n_periods)</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If <code>size(rel_pr, 2)</code> is greater than <code>size(weights, 2)</code>, then the last <code>size(weights, 2)</code> columns of <code>rel_pr</code> will be used.</p></div></div><p><strong>Returns</strong></p><ul><li><code>all_sn::Vector{T}</code>: the cumulative wealth of investment during the investment period.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Tools/metrics.jl#L39-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.sspo" href="#OnlinePortfolioSelection.sspo"><code>OnlinePortfolioSelection.sspo</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">sspo(
  p::AbstractMatrix,
  horizon::Integer,
  w::Integer,
  b̂ₜ::Union{Nothing, AbstractVector}=nothing,
  η::AbstractFloat=0.005,
  γ::AbstractFloat=0.01,
  λ::AbstractFloat=0.5,
  ζ::Integer=500,
  ϵ::AbstractFloat=1e-4,
  max_iter=1e4
)</code></pre><p>Run Short-term Sparse Portfolio Optimization (SSPO) algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>p::AbstractMatrix</code>: Prices of the assets.</li><li><code>horizon::Integer</code>: Number of investment periods.</li><li><code>w::Integer</code>: Window size.</li><li><code>b̂ₜ::Union{Nothing, AbstractVector}=nothing</code>: Initial portfolio weights. If <code>nothing</code> is passed, then a uniform portfolio will be selected for the first period.</li><li><code>η::AbstractFloat=0.005</code>: Learning rate.</li><li><code>γ::AbstractFloat=0.01</code>: Regularization parameter.</li><li><code>λ::AbstractFloat=0.5</code>: Regularization parameter.</li><li><code>ζ::Integer=500</code>: Regularization parameter.</li><li><code>ϵ::AbstractFloat=1e-4</code>: Tolerance for the convergence of the algorithm.</li><li><code>max_iter=1e4</code>: Maximum number of iterations.</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;GOOG&quot;, &quot;AAPL&quot;, &quot;MSFT&quot;, &quot;AMZN&quot;]

julia&gt; querry = [get_prices(ticker, startdt=&quot;2020-01-01&quot;, enddt=&quot;2020-01-31&quot;)[&quot;adjclose&quot;] for ticker=tickers]

julia&gt; prices = stack(querry, dims=1)

julia&gt; h = 5

julia&gt; w = 5

julia&gt; model = sspo(prices, h, w);

julia&gt; model.b
4×5 Matrix{Float64}:
 0.25  9.92018e-9  1.0         1.0  1.0
 0.25  0.0         0.0         0.0  0.0
 0.25  0.0         0.0         0.0  0.0
 0.25  1.0         9.94367e-9  0.0  0.0</code></pre><p><strong>Reference</strong></p><blockquote><p><a href="http://jmlr.org/papers/v19/17-558.html">Short-term Sparse Portfolio Optimization Based on Alternating Direction Method of Multipliers</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/SSPO.jl#L26-L83">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.tppt" href="#OnlinePortfolioSelection.tppt"><code>OnlinePortfolioSelection.tppt</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">tppt(
  prices::AbstractMatrix,
  horizon::Integer,
  w::Integer,
  ϵ::Integer=100,
  α::AbstractFloat=0.5
)</code></pre><p>Run Trend Promote Price Tracking (TPPT) algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>prices::AbstractMatrix</code>: Prices of the assets. Each column is a period and each row is an asset.</li><li><code>horizon::Integer</code>: The number of Investment periods.</li><li><code>w::Integer</code>: The window size.</li><li><code>ϵ::Integer</code>: Constraint parameter.</li><li><code>α::AbstractFloat</code>: Exponential moving average parameter.</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;GOOG&quot;];

julia&gt; querry = [get_prices(ticker, startdt=&quot;2020-01-01&quot;, enddt=&quot;2020-01-12&quot;)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; prices = stack(querry, dims=1);

julia&gt; horizon, w = 3, 3;

julia&gt; model = tppt(prices, horizon, w);

julia&gt; model.b
3×3 Matrix{Float64}:
 0.333333  1.52594e-6  7.35766e-7
 0.333333  5.30452e-6  3.90444e-6
 0.333333  0.999993    0.999995</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1016/j.knosys.2021.107957">An online portfolio strategy based on trend promote price tracing ensemble learning algorithm</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/TPPT.jl#L63-L107">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.uniform-Tuple{Int64, Int64}" href="#OnlinePortfolioSelection.uniform-Tuple{Int64, Int64}"><code>OnlinePortfolioSelection.uniform</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">uniform(n_assets::Int, horizon::Int)</code></pre><p>Construct uniform portfolios.</p><p><strong>Arguments</strong></p><ul><li><code>n_assets::Int</code>: The number of assets.</li><li><code>horizon::Int</code>: The number of investment periods.</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An object of <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> type.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; model = uniform(3, 10)

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/uniform.jl#L1-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.up-Union{Tuple{AbstractMatrix{T}}, Tuple{T}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.up-Union{Tuple{AbstractMatrix{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.up</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function up(
  rel_pr::AbstractMatrix{T};
  eval_points::Integer=10^4
) where T&lt;:AbstractFloat</code></pre><p>Universal Portfolio (UP) algorithm.</p><p>Calculate the Universal Portfolio (UP) weights and budgets using the given historical prices and parameters.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix{T}</code>: Historical relative prices.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>eval_points::Integer=10^4</code>: Number of evaluation points.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; rel_pr = rand(3, 9);

julia&gt; m_up = up(rel_pr);

julia&gt; m_up.b
3×9 Matrix{Float64}:
 0.333333  0.272709  0.345846  0.385378  0.308659  0.328867  0.280564  0.349619  0.433529
 0.333333  0.288016  0.315603  0.249962  0.252828  0.24165   0.270741  0.2621    0.235743
 0.333333  0.439276  0.338551  0.364661  0.438512  0.429483  0.448695  0.388281  0.330729

julia&gt; sum(m_up.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1111/j.1467-9965.1991.tb00002.x">Universal Portfolios</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/UP.jl#L1-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioSelection.waeg-Tuple{AbstractMatrix, AbstractFloat, AbstractFloat, Integer}" href="#OnlinePortfolioSelection.waeg-Tuple{AbstractMatrix, AbstractFloat, AbstractFloat, Integer}"><code>OnlinePortfolioSelection.waeg</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">waeg(x::AbstractMatrix, ηₘᵢₙ::AbstractFloat, ηₘₐₓ::AbstractFloat, k::Integer)</code></pre><p>Run Weak Aggregating Exponential Gradient (WAEG) algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>x::AbstractMatrix</code>: matrix of relative prices.</li><li><code>ηₘᵢₙ::AbstractFloat</code>: minimum learning rate.</li><li><code>ηₘₐₓ::AbstractFloat</code>: maximum learning rate.</li><li><code>k::Integer</code>: number of EG experts.</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="../types/#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; rel_pr = rand(4, 8);

julia&gt; m = waeg(rel_pr, 0.01, 0.2, 20);

julia&gt; m.b
4×8 Matrix{Float64}:
 0.25  0.238126  0.24158   0.2619    0.261729  0.27466   0.25148   0.256611
 0.25  0.261957  0.259588  0.248465  0.228691  0.24469   0.256674  0.246801
 0.25  0.245549  0.247592  0.254579  0.27397   0.259982  0.272341  0.290651
 0.25  0.254368  0.25124   0.235057  0.23561   0.220668  0.219505  0.205937

julia&gt; sum(m.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1007/s10614-019-09890-2">Boosting Exponential Gradient Strategy for Online Portfolio Selection: An Aggregating Experts’ Advice Method</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/feab664a97ba0941d687c5969dfe19c00569510f/src/Algos/WAEG.jl#L25-L60">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../performance_eval/">« Performance Evaluation</a><a class="docs-footer-nextpage" href="../types/">Types »</a><div class="flexbox-break"></div><p class="footer-message"><a href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl">OnlinePortfolioSelection.jl</a> v2.10.1 docs powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Monday 26 February 2024 05:35">Monday 26 February 2024</span>. Using Julia version 1.10.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
