<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Benchmark · OnlinePortfolioSelection.jl</title><meta name="title" content="Benchmark · OnlinePortfolioSelection.jl"/><meta property="og:title" content="Benchmark · OnlinePortfolioSelection.jl"/><meta property="twitter:title" content="Benchmark · OnlinePortfolioSelection.jl"/><meta name="description" content="Documentation for OnlinePortfolioSelection.jl."/><meta property="og:description" content="Documentation for OnlinePortfolioSelection.jl."/><meta property="twitter:description" content="Documentation for OnlinePortfolioSelection.jl."/><meta property="og:url" content="https://shayandavoodii.github.io/OnlinePortfolioSelection.jl/benchmark/"/><meta property="twitter:url" content="https://shayandavoodii.github.io/OnlinePortfolioSelection.jl/benchmark/"/><link rel="canonical" href="https://shayandavoodii.github.io/OnlinePortfolioSelection.jl/benchmark/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="OnlinePortfolioSelection.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">OnlinePortfolioSelection.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../fetchdata/">Fetch Financial Data</a></li><li><a class="tocitem" href="../python/">Use In Python</a></li><li><span class="tocitem">OPS Strategies</span><ul><li class="is-active"><a class="tocitem" href>Benchmark</a><ul class="internal"><li><a class="tocitem" href="#CRP"><span>CRP</span></a></li><li><a class="tocitem" href="#BS"><span>BS</span></a></li><li><a class="tocitem" href="#/N"><span>1/N</span></a></li><li><a class="tocitem" href="#Universal-Portfolio"><span>Universal Portfolio</span></a></li><li><a class="tocitem" href="#References"><span>References</span></a></li></ul></li><li><a class="tocitem" href="../FL/">Follow the Loser</a></li><li><a class="tocitem" href="../FW/">Follow the Winner</a></li><li><a class="tocitem" href="../PM/">Pattern-Matching</a></li><li><a class="tocitem" href="../ML/">Meta-Learning</a></li><li><a class="tocitem" href="../Combined/">Combined Strategies</a></li></ul></li><li><a class="tocitem" href="../performance_eval/">Performance Evaluation</a></li><li><a class="tocitem" href="../funcs/">Functions</a></li><li><a class="tocitem" href="../types/">Types</a></li><li><a class="tocitem" href="../refs/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">OPS Strategies</a></li><li class="is-active"><a href>Benchmark</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Benchmark</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/main/docs/src/benchmark.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Benchmark-Strategies"><a class="docs-heading-anchor" href="#Benchmark-Strategies">Benchmark Strategies</a><a id="Benchmark-Strategies-1"></a><a class="docs-heading-anchor-permalink" href="#Benchmark-Strategies" title="Permalink"></a></h1><p>In the domain of online portfolio selection, certain strategies are considered benchmark strategies. One of the simplest is the Buy and Hold (BH) strategy, often referred to as the <em>market strategy</em>. BH involves an equal investment in m assets at the beginning, maintaining these allocations throughout the subsequent periods, leading to passive weight adjustments based on the assets&#39; price variations. An optimized version, the Best-Stock (BS) strategy, allocates all capital to the best-performing asset over the periods. These benchmark portfolio selection models are straightforward, lacking the use of sophisticated statistical or machine learning techniques to uncover data patterns. Consequently, they serve as baselines for evaluating the performance of newly developed models. Another benchmark strategy, the Constant Rebalanced Portfolio (CRP), maintains a fixed weight for each asset over a specified period. The currently implemented strategies in this package include:</p><ol><li>Constant Rebalanced Portfolio (CRP)</li><li>Best Stock (BS)</li><li>Uniform Portfolio (1/N)</li><li>UP</li></ol><h2 id="CRP"><a class="docs-heading-anchor" href="#CRP">CRP</a><a id="CRP-1"></a><a class="docs-heading-anchor-permalink" href="#CRP" title="Permalink"></a></h2><p>Let&#39;s run the algorithm [<a href="../refs/#COVER451321">2</a>] on the real market data. Assume the data (named as <code>prices</code>) is collected as noted in the <a href="../fetchdata/#Fetch-Data">Fetch Data</a> section.</p><pre><code class="language-julia hljs">juila&gt; using OnlinePortfolioSelection

julia&gt; size(prices)
(17, 5)

# OnlinePortfolioSelection suppose that the data is in the form of a matrix
# where each row is the price vector of the assets at a specific time period.
julia&gt; prices = prices |&gt; permutedims;

# Let&#39;s run the algorithm on the last 5 days of the data.
julia&gt; m_crp = crp(prices[:, end-4:end]);

juila&gt; m_crp.b
5×5 Matrix{Float64}:
 0.2  0.2  0.2  0.2  0.2
 0.2  0.2  0.2  0.2  0.2
 0.2  0.2  0.2  0.2  0.2
 0.2  0.2  0.2  0.2  0.2
 0.2  0.2  0.2  0.2  0.2</code></pre><p>One can calculate the cumulative wealth during the investment period by using the <a href="../funcs/#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a> function:</p><pre><code class="language-julia hljs">julia&gt; rel_price = prices[:, 2:end] ./ prices[:, 1:end-1];

julia&gt; sn(m_crp.b, rel_price)
6-element Vector{Float64}:
 1.0
 0.9879822623031318
 0.9854808899164217
 0.9871240426268018
 0.977351149446221
 0.9716459683279461</code></pre><p>The outcome demonstrates that if we had invested during the specified period, we would have incurred a loss of approximately 2.8% of our capital. It&#39;s important to note that <a href="../funcs/#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a> automatically considers the last 5 relative prices in this instance. Let&#39;s further analyze the algorithm&#39;s performance based on some significant metrics:</p><pre><code class="language-julia hljs">julia&gt; results = OPSMetrics(m_crp.b, rel_price)

            Cumulative Return: 0.972
                          APY: -0.765
Annualized Standard Deviation: 0.087
      Annualized Sharpe Ratio: -9.008
             Maximum Drawdown: 0.028
                 Calmar Ratio: -26.993

julia&gt; results.
APY         Ann_Sharpe  Ann_Std     Calmar      MDD         Sn

julia&gt; results.MDD
0.02835403167205386</code></pre><h2 id="BS"><a class="docs-heading-anchor" href="#BS">BS</a><a id="BS-1"></a><a class="docs-heading-anchor-permalink" href="#BS" title="Permalink"></a></h2><p>The model [<a href="../refs/#KBSSMOP">3</a>] is a variant of the BAH strategy that retroactively acquires the best stock. Within this package, users can select the number of days to retrospectively examine (using the <code>last_n</code> keyword argument) and identify the best stock. If <code>last_n</code> is either not provided or set to <code>0</code>, the algorithm will consider the entire dataset up to the present day for each period to identify the best stock. Conversely, if <code>last_n</code> is specified, the algorithm will only consider the performance of each stock within the last <code>last_n</code> days and then select the best-performing one. To implement the algorithm on real market data, let&#39;s assume the data is collected as detailed in the <a href="../fetchdata/#Fetch-Data">Fetch Data</a> section.</p><pre><code class="language-julia hljs">juila&gt; using OnlinePortfolioSelection

julia&gt; size(prices)
(17, 5)

# OnlinePortfolioSelection suppose that the data is in the form of a matrix
# where each row is the price vector of the assets at a specific time period.
julia&gt; prices = prices |&gt; permutedims;

# Let&#39;s run the algorithm on the last 10 days of the data.
julia&gt; m_bs = bs(prices[:, end-9:end]);

juila&gt; m_bs.b
5×10 Matrix{Float64}:
 0.2  0.0  1.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.2  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.2  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.2  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.2  1.0  0.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0</code></pre><p>After running the algorithm, one can calculate the cumulative wealth during the investment period by using the <a href="../funcs/#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a> function:</p><pre><code class="language-julia hljs">julia&gt; rel_price = prices[:, 2:end] ./ prices[:, 1:end-1];

julia&gt; sn(m_bs.b, rel_price)
11-element Vector{Float64}:
 1.0
 1.0067934076484562
 1.009228482491198
 1.0188656476194202
 1.0387633347003844
 1.0354766468359777
 1.027215571086806
 1.0305022589512125
 1.0499557074411052
 1.0350324760158582
 1.0255278032954953</code></pre><p>The outcome suggests that if we had invested during the specified period, we would have gained approximately 2.6% of our capital. Notably, <a href="../funcs/#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a> automatically considers the last 10 relative prices in this scenario.</p><p>It&#39;s important to highlight that this package offers functions designed to assess the algorithm&#39;s performance. For additional insights, refer to the <a href="../performance_eval/#Performance-evaluation">Performance evaluation</a> section.</p><h2 id="/N"><a class="docs-heading-anchor" href="#/N">1/N</a><a id="/N-1"></a><a class="docs-heading-anchor-permalink" href="#/N" title="Permalink"></a></h2><p>This model invests equally in all assets. Let&#39;s run the algorithm:</p><pre><code class="language-julia hljs">juila&gt; using OnlinePortfolioSelection

julia&gt; size(prices)
(17, 5)

# OnlinePortfolioSelection suppose that the data is in the form of a matrix
# where each row is the price vector of the assets at a specific time period.
julia&gt; prices = prices |&gt; permutedims;

# Let&#39;s run the algorithm on the last 10 days of the data.
julia&gt; m_uni = uniform(5, 10);

juila&gt; m_uni.b
5×10 Matrix{Float64}:
 0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2
 0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2
 0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2
 0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2
 0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2  0.2</code></pre><p>After running the algorithm, one can calculate the cumulative wealth during the investment period by using the <a href="../funcs/#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a> function:</p><pre><code class="language-julia hljs">julia&gt; rel_price = prices[:, 2:end] ./ prices[:, 1:end-1];

julia&gt; sn(m_uni.b, rel_price)
11-element Vector{Float64}:
 1.0
 1.006793403065235
 1.0044027643134168
 1.0040238271404696
 1.0051064998568846
 0.9884495565932121
 0.9765706200501145
 0.9740981677925922
 0.9757223268076264
 0.9660623342882886
 0.960423009921307</code></pre><p>The result reveals that if investment had been made during the specified period, a loss of approximately 3.9% of the capital would have been incurred. It&#39;s noteworthy that <a href="../funcs/#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a> automatically accounts for the last 10 relative prices in this context.</p><p>Additionally, this package offers functions for assessing the algorithm&#39;s performance. For further details, refer to the <a href="../performance_eval/#Performance-evaluation">Performance evaluation</a> section.</p><h2 id="Universal-Portfolio"><a class="docs-heading-anchor" href="#Universal-Portfolio">Universal Portfolio</a><a id="Universal-Portfolio-1"></a><a class="docs-heading-anchor-permalink" href="#Universal-Portfolio" title="Permalink"></a></h2><p>Universal Portfolio (UP) is a Follow the Winner (FW) strategy introduced by <a href="../refs/#COVER451321">Cover [2]</a>. This algorithm is designed to optimize the cumulative return of a portfolio over the investment horizon. UP&#39;s approach is centered on daily stock market performance and the distribution of wealth invested in individual stocks.</p><p>See <a href="../funcs/#OnlinePortfolioSelection.up-Tuple{Matrix{Float64}}"><code>up</code></a>.</p><h3 id="Run-UP"><a class="docs-heading-anchor" href="#Run-UP">Run UP</a><a id="Run-UP-1"></a><a class="docs-heading-anchor-permalink" href="#Run-UP" title="Permalink"></a></h3><p><strong>Note:</strong> This package is meant to be used by researchers <strong>NOT FOR MARKET PRACTITIONERS</strong>. Let&#39;s run the algorithm on the real market data. The data is collected as noted in the <a href="../fetchdata/#Fetch-Data">Fetch Data</a> section.</p><pre><code class="language-julia hljs">juila&gt; using OnlinePortfolioSelection

julia&gt; size(prices)
(17, 5)

# OnlinePortfolioSelection suppose that the data is in the form of a matrix
# where each row is the price vector of the assets at a specific time period.
julia&gt; prices = prices |&gt; permutedims;

# Let&#39;s run the algorithm on the last 5 days of the data.
julia&gt; m_up = up(prices[:, end-4:end], eval_points=100);

juila&gt; m_up.b
5×5 Matrix{Float64}:
 0.2  0.216518  0.216638  0.21681   0.216542
 0.2  0.203395  0.203615  0.203754  0.203528
 0.2  0.191899  0.191793  0.192316  0.192473
 0.2  0.193023  0.192302  0.191687  0.19208
 0.2  0.195164  0.195652  0.195433  0.195377</code></pre><p>One can calculate the cumulative wealth during the investment period by using the <a href="../funcs/#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a> function:</p><pre><code class="language-julia hljs">julia&gt; rel_price = prices[:, 2:end] ./ prices[:, 1:end-1];

julia&gt; sn(m_up.b, rel_price)
6-element Vector{Float64}:
 1.0
 0.9879822623031318
 0.9856240412854884
 0.9874863498385578
 0.9778277061434468
 0.9718529924971879</code></pre><p>The outcome shows that if we had invested during that period, we would have incurred a loss of approximately 2.8% in wealth. It&#39;s important to note that <a href="../funcs/#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a> automatically considers the last 5 relative prices in this context. Let&#39;s now examine the algorithm&#39;s performance using various significant metrics.</p><pre><code class="language-julia hljs">julia&gt; results = OPSMetrics(m_up.b, rel_price)

            Cumulative Return: 0.972
                          APY: -0.763
Annualized Standard Deviation: 0.088
      Annualized Sharpe Ratio: -8.857
             Maximum Drawdown: 0.028
                 Calmar Ratio: -27.101

julia&gt; results.
APY         Ann_Sharpe  Ann_Std     Calmar      MDD         Sn

julia&gt; results.MDD
0.02814700750281207</code></pre><p>It is worht mentioning that each metric can be accessed individually by writing <code>results.</code> and pressing <code>Tab</code> key. Note that one can individually investigate the performance of the algorithm regarding each metric. See <a href="../funcs/#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>, <a href="../funcs/#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a>, <a href="../funcs/#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a>, <a href="../funcs/#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a>, <a href="../funcs/#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a>, and <a href="../funcs/#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a>. See <a href="../performance_eval/#Performance-evaluation">Performance evaluation</a> section for more information.</p><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><div class="citation noncanonical"><dl><dt>[2]</dt><dd><div>T. M. Cover. <em>Universal Portfolios</em>. <a href="https://doi.org/https://doi.org/10.1111/j.1467-9965.1991.tb00002.x">Mathematical Finance <strong>1</strong>, 1–29</a> (1991).</div></dd><dt>[3]</dt><dd><div>L. GYÖRFI, A. URBÁN and I. VAJDA. <em>KERNEL-BASED SEMI-LOG-OPTIMAL EMPIRICAL PORTFOLIO SELECTION STRATEGIES</em>. <a href="https://doi.org/https://doi.org/10.1142/S0219024907004251">International Journal of Theoretical and Applied Finance <strong>10</strong>, 505–516</a> (2007).</div></dd></dl></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../python/">« Use In Python</a><a class="docs-footer-nextpage" href="../FL/">Follow the Loser »</a><div class="flexbox-break"></div><p class="footer-message"><a href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl">OnlinePortfolioSelection.jl</a> v2.3.1 docs powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Thursday 9 November 2023 18:26">Thursday 9 November 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
