<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Performance Evaluation · OnlinePortfolioSelection.jl</title><meta name="title" content="Performance Evaluation · OnlinePortfolioSelection.jl"/><meta property="og:title" content="Performance Evaluation · OnlinePortfolioSelection.jl"/><meta property="twitter:title" content="Performance Evaluation · OnlinePortfolioSelection.jl"/><meta name="description" content="Documentation for OnlinePortfolioSelection.jl."/><meta property="og:description" content="Documentation for OnlinePortfolioSelection.jl."/><meta property="twitter:description" content="Documentation for OnlinePortfolioSelection.jl."/><meta property="og:url" content="https://shayandavoodii.github.io/OnlinePortfolioSelection.jl/performance_eval/"/><meta property="twitter:url" content="https://shayandavoodii.github.io/OnlinePortfolioSelection.jl/performance_eval/"/><link rel="canonical" href="https://shayandavoodii.github.io/OnlinePortfolioSelection.jl/performance_eval/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="OnlinePortfolioSelection.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">OnlinePortfolioSelection.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../fetchdata/">Fetch Financial Data</a></li><li><a class="tocitem" href="../python/">Use In Python</a></li><li><span class="tocitem">OPS Strategies</span><ul><li><a class="tocitem" href="../benchmark/">Benchmark</a></li><li><a class="tocitem" href="../FL/">Follow the Loser</a></li><li><a class="tocitem" href="../FW/">Follow the Winner</a></li><li><a class="tocitem" href="../PM/">Pattern-Matching</a></li><li><a class="tocitem" href="../ML/">Meta-Learning</a></li><li><a class="tocitem" href="../Combined/">Combined Strategies</a></li></ul></li><li class="is-active"><a class="tocitem" href>Performance Evaluation</a><ul class="internal"><li><a class="tocitem" href="#Metrics"><span>Metrics</span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li><li><a class="tocitem" href="#References"><span>References</span></a></li></ul></li><li><a class="tocitem" href="../funcs/">Functions</a></li><li><a class="tocitem" href="../types/">Types</a></li><li><a class="tocitem" href="../refs/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Performance Evaluation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Performance Evaluation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/main/docs/src/performance_eval.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Performance-evaluation"><a class="docs-heading-anchor" href="#Performance-evaluation">Performance evaluation</a><a id="Performance-evaluation-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-evaluation" title="Permalink"></a></h1><p>This package provides a variety of metrics for evaluating algorithm performance. These metrics are widely recognized in the literature and serve as benchmarks for comparing the performances of different algorithms. Currently, the supported metrics include:</p><table><tr><th style="text-align: center">Row №</th><th style="text-align: left">Metric</th><th style="text-align: center">Abbreviation</th><th style="text-align: center">Direction</th></tr><tr><td style="text-align: center">1</td><td style="text-align: left"><a href="#Cumulative-Wealth-(CW,-Also-known-as-S_n)">Cumulative Wealth</a></td><td style="text-align: center">CW (Also known as <span>$S_n$</span>)</td><td style="text-align: center">The <strong>higher</strong> the better</td></tr><tr><td style="text-align: center">2</td><td style="text-align: left"><a href="#Mean-Excess-Return-(MER)">Mean Excess Return</a></td><td style="text-align: center">MER</td><td style="text-align: center">The <strong>higher</strong> the better</td></tr><tr><td style="text-align: center">3</td><td style="text-align: left"><a href="#Information-Ratio-(IR)">Information Ratio</a></td><td style="text-align: center">IR</td><td style="text-align: center">The <strong>higher</strong> the better</td></tr><tr><td style="text-align: center">4</td><td style="text-align: left"><a href="#Annualized-Percentage-Yield-(APY)">Annualized Percentage Yield</a></td><td style="text-align: center">APY</td><td style="text-align: center">The <strong>higher</strong> the better</td></tr><tr><td style="text-align: center">5</td><td style="text-align: left"><a href="#Annualized-Standard-Deviation-(\\sigma_p)">Annualized Standard Deviation</a></td><td style="text-align: center"><span>$\sigma_p$</span></td><td style="text-align: center">The lower the better</td></tr><tr><td style="text-align: center">6</td><td style="text-align: left"><a href="#Annualized-Sharpe-Ratio-(SR)">Annualized Sharpe Ratio</a></td><td style="text-align: center">SR</td><td style="text-align: center">The <strong>higher</strong> the better</td></tr><tr><td style="text-align: center">7</td><td style="text-align: left"><a href="#Maximum-Drawdown-(MDD)">Maximum Drawdown</a></td><td style="text-align: center">MDD</td><td style="text-align: center">The lower the better</td></tr><tr><td style="text-align: center">8</td><td style="text-align: left"><a href="#Calmar-Ratio-(CR)">Calmar Ratio</a></td><td style="text-align: center">CR</td><td style="text-align: center">The <strong>higher</strong> the better</td></tr><tr><td style="text-align: center">9</td><td style="text-align: left"><a href="#Average-Turnover-(AT)">Average Turnover</a></td><td style="text-align: center">AT</td><td style="text-align: center">The lower the better</td></tr></table><h2 id="Metrics"><a class="docs-heading-anchor" href="#Metrics">Metrics</a><a id="Metrics-1"></a><a class="docs-heading-anchor-permalink" href="#Metrics" title="Permalink"></a></h2><h3 id="Cumulative-Wealth-(CW,-Also-known-as-S_n)"><a class="docs-heading-anchor" href="#Cumulative-Wealth-(CW,-Also-known-as-S_n)">Cumulative Wealth (CW, Also known as <span>$S_n$</span>)</a><a id="Cumulative-Wealth-(CW,-Also-known-as-S_n)-1"></a><a class="docs-heading-anchor-permalink" href="#Cumulative-Wealth-(CW,-Also-known-as-S_n)" title="Permalink"></a></h3><p>This metric computes the portfolio&#39;s cumulative wealth of the algorithm throughout an investment period. The cumulative wealth is defined as:</p><p class="math-container">\[\begin{aligned}
{S_n} = {S_0}\prod\limits_{t = 1}^T {\left\langle {{b_t},{x_t}} \right\rangle }
\end{aligned}\]</p><p>where <span>$S_0$</span> represents the initial capital, <span>$b_t$</span> stands for the portfolio vector at time <span>$t$</span>, and <span>$x_t$</span> denotes the relative price vector at time <span>$t$</span>. This metric can be evaluated using the <a href="../funcs/#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a> function.</p><h3 id="Mean-Excess-Return-(MER)"><a class="docs-heading-anchor" href="#Mean-Excess-Return-(MER)">Mean Excess Return (MER)</a><a id="Mean-Excess-Return-(MER)-1"></a><a class="docs-heading-anchor-permalink" href="#Mean-Excess-Return-(MER)" title="Permalink"></a></h3><p>MER is utilized to gauge the average excess returns of an OPS method that surpasses the benchmark market strategy. MER is defined as:</p><p class="math-container">\[MER = {1 \over n}\sum\nolimits_{t = 1}^n {{R_t} - } {1 \over n}\sum\nolimits_{t = 1}^n {R_t^*}\]</p><p>where <span>$R$</span> and <span>${R_t^*}$</span> represent the daily returns of a portfolio and the market strategy at the <span>$t$</span>th trading day, respectively. For a given OPS method, accounting for transaction costs, <span>${{R_t}}$</span> is calculated by <span>${R_t} = \left( {\mathbf{x}_t\mathbf{b}_t} \right) \times \left( {1 - {\nu  \over 2} \times \sum\nolimits_{i = 1}^d {\left| {{b_{t,i}} - {{\tilde b}_{t,i}}} \right|} } \right) - 1$</span>. The market strategy initially allocates capital equally among all assets and remains unchanged. <span>${R_t^*}$</span> is defined as: <span>$R_t^* = \mathbf{x}_t \cdot \mathbf{b}^* - 1$</span> and <span>${\mathbf{b}^*} = {\left( {{1 \over d},{1 \over d}, \ldots ,{1 \over d}} \right)^ \top }$</span>, where <span>$d$</span> is the number of assets, and <span>$n$</span> is the number of trading days. This metric can be calculated using the <a href="../funcs/#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat"><code>mer</code></a> function. (see [<a href="../refs/#XI2023109872">23</a>] for more details.)</p><h3 id="Information-Ratio-(IR)"><a class="docs-heading-anchor" href="#Information-Ratio-(IR)">Information Ratio (IR)</a><a id="Information-Ratio-(IR)-1"></a><a class="docs-heading-anchor-permalink" href="#Information-Ratio-(IR)" title="Permalink"></a></h3><p>The information ratio is a risk-adjusted excess return metric compared with the market benchmark. It is defined as:</p><p class="math-container">\[IR = \frac{{{{\bar R}_s} - {{\bar R}_m}}}{{\sigma \left( {{R_s} - {R_m}} \right)}}\]</p><p>where <span>$R_s$</span> represents the portfolio&#39;s daily return, <span>$R_m$</span> represents the market&#39;s daily return, <span>$\bar R_s$</span> represents the portfolio&#39;s average daily return, <span>$\bar R_m$</span> represents the market&#39;s average daily return, and <span>$\sigma$</span> represents the standard deviation of the portfolio&#39;s daily excess return over the market. Note that in this package, the logarithmic return is used. See <a href="../funcs/#OnlinePortfolioSelection.ir-Union{Tuple{S}, Tuple{AbstractMatrix{S}, AbstractMatrix{S}, AbstractVector{S}}} where S&lt;:AbstractFloat"><code>ir</code></a>.</p><h3 id="Annualized-Percentage-Yield-(APY)"><a class="docs-heading-anchor" href="#Annualized-Percentage-Yield-(APY)">Annualized Percentage Yield (APY)</a><a id="Annualized-Percentage-Yield-(APY)-1"></a><a class="docs-heading-anchor-permalink" href="#Annualized-Percentage-Yield-(APY)" title="Permalink"></a></h3><p>This metric computes the annualized return of the algorithm throughout the investment period. The annualized return is defined as:</p><p class="math-container">\[\begin{aligned}
{APY} = \left( {{S_n}} \right)^{\frac{1}{y}} - 1
\end{aligned}\]</p><p>where <span>$y$</span> represents the number of years in the investment period. This metric can be evaluated using the <a href="../funcs/#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a> function.</p><h3 id="Annualized-Standard-Deviation-(\\sigma_p)"><a class="docs-heading-anchor" href="#Annualized-Standard-Deviation-(\\sigma_p)">Annualized Standard Deviation (<span>$\sigma_p$</span>)</a><a id="Annualized-Standard-Deviation-(\\sigma_p)-1"></a><a class="docs-heading-anchor-permalink" href="#Annualized-Standard-Deviation-(\\sigma_p)" title="Permalink"></a></h3><p>Another measurement employed to assess risk is the annual standard deviation of portfolio returns. The daily standard deviation is computed to derive the annual standard deviation, after which it is multiplied by <span>$\sqrt{252}$</span> (assuming 252 days in a year). Users can adjust the number of days in a year by specifying the <code>dpy</code> keyword argument. This metric can be computed using the <a href="../funcs/#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a> function.</p><h3 id="Annualized-Sharpe-Ratio-(SR)"><a class="docs-heading-anchor" href="#Annualized-Sharpe-Ratio-(SR)">Annualized Sharpe Ratio (SR)</a><a id="Annualized-Sharpe-Ratio-(SR)-1"></a><a class="docs-heading-anchor-permalink" href="#Annualized-Sharpe-Ratio-(SR)" title="Permalink"></a></h3><p>The Sharpe ratio serves as a measure of risk-adjusted return. It is defined as:</p><p class="math-container">\[\begin{aligned}
SR = {{APY - {R_f}} \over {{\sigma _p}}}
\end{aligned}\]</p><p>Here, <span>$R_f$</span> denotes the risk-free rate, typically equivalent to the treasury bill rate at the investment period. This metric can be computed using the <a href="../funcs/#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a> function.</p><h3 id="Maximum-Drawdown-(MDD)"><a class="docs-heading-anchor" href="#Maximum-Drawdown-(MDD)">Maximum Drawdown (MDD)</a><a id="Maximum-Drawdown-(MDD)-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Drawdown-(MDD)" title="Permalink"></a></h3><p>The maximum drawdown is the largest loss observed from a peak to a trough within a portfolio, before a subsequent peak is attained. The calculation of MDD relies on the capital break value. Capital break serves as a critical criterion for assessing the capital market and equals the maximum decline from the peak of the portfolio cumulative function. Capital break is defined as:</p><p class="math-container">\[\begin{aligned}
DD\left( T \right) = \sup \left[ {0,{{\sup }_{i \in \left( {0,t} \right)}}{S_i} - {S_t}} \right]
\end{aligned}\]</p><p>where <span>$S_t$</span> denotes the portfolio cumulative function at time <span>$t$</span>. The maximum capital break, used to gauge risk, is defined as:</p><p class="math-container">\[\begin{aligned}
MDD\left( n \right) = {\sup _{t \in \left( {0,n} \right)}}\left[ {DD\left( t \right)} \right]
\end{aligned}\]</p><p>This metric can be calculated using the <a href="../funcs/#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a> function.</p><h3 id="Calmar-Ratio-(CR)"><a class="docs-heading-anchor" href="#Calmar-Ratio-(CR)">Calmar Ratio (CR)</a><a id="Calmar-Ratio-(CR)-1"></a><a class="docs-heading-anchor-permalink" href="#Calmar-Ratio-(CR)" title="Permalink"></a></h3><p>The Calmar ratio is a risk-adjusted return metric based on the maximum drawdown. It is defined as:</p><p class="math-container">\[\begin{aligned}
CR = {{APY} \over {MDD}}
\end{aligned}\]</p><p>This metric can be computed using the <a href="../funcs/#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a> function.</p><h3 id="Average-Turnover-(AT)"><a class="docs-heading-anchor" href="#Average-Turnover-(AT)">Average Turnover (AT)</a><a id="Average-Turnover-(AT)-1"></a><a class="docs-heading-anchor-permalink" href="#Average-Turnover-(AT)" title="Permalink"></a></h3><p>This measure computes how frequently the weight of each asset is changing during the investment period. The lower the AT, the better is performance of the algorithm. The AT can be calculated by:</p><p class="math-container">\[AT = \frac{{{{\sum\nolimits_{t = 2}^T {\left\| {{{\mathbf{b}}_t} - {{\hat {\mathbf{b}}}_{t - 1}}} \right\|} }_1}}}{{2\left( {T - 1} \right)}}\]</p><p>where <span>$T$</span> represents the number of investing days, <span>${{{\hat {\mathbf{b}}}_{t - 1}}}$</span> denotes the adjusted portfolio at the end of the <span>$(t − 1)$</span>-th day, which can be calculated using <span>${\hat {\mathbf{b}}_{t - 1}} = \frac{{{\mathbf{x}_{t - 1}} \odot {\mathbf{b}_{t - 1}}}}{{{\mathbf{x}_{t - 1}}^ \top {\mathbf{b}_{t - 1}}}}$</span> in which <span>${{{\mathbf{x}}_{t - 1}}}$</span> is the price relative vector at time period <span>$t-1$</span>, and <span>${\left\|  \cdot  \right\|_1}$</span> is the L1-norm operator. This metric can be calculated using the <a href="../funcs/#OnlinePortfolioSelection.at-Tuple{AbstractMatrix, AbstractMatrix}"><code>at</code></a> function.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>It&#39;s noteworthy that these metrics can be computed collectively rather than individually. This can be achieved using the <a href="../funcs/#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a> function. This function yields an object of type <a href="../types/#OnlinePortfolioSelection.OPSMetrics"><code>OPSMetrics</code></a> containing all the aforementioned metrics.</p></div></div><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><p>Below is a simple example that illustrates how to utilize the metrics. Initially, I utilize the <a href="../funcs/#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a> function to compute all the metrics collectively. Subsequently, I present the procedure to compute each metric individually.</p><h3 id="[opsmetrics](@ref)-function"><a class="docs-heading-anchor" href="#[opsmetrics](@ref)-function"><a href="../funcs/#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a> function</a><a id="[opsmetrics](@ref)-function-1"></a><a class="docs-heading-anchor-permalink" href="#[opsmetrics](@ref)-function" title="Permalink"></a></h3><p>The <a href="../funcs/#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a> function facilitates the computation of all metrics simultaneously. It requires the following positional arguments:</p><ul><li><code>weights</code>: A matrix sized <span>$m \times t$</span>, representing the portfolio weights on each trading day utilizing the chosen OPS algorithm.</li><li><code>rel_pr</code>: A matrix sized <span>$m \times t$</span>, which includes the relative prices of assets on each trading day. Typically, these prices are computed as <span>$\frac{p_{t,i}}{p_{t-1,i}}$</span> in most studies, where <span>$p_{t,i}$</span> denotes the price of asset <span>$i$</span> at time <span>$t$</span>. Alternatively, in some studies, relative prices are calculated as <span>$\frac{c_{t,i}}{o_{t,i}}$</span>, where <span>$c_{t,i}$</span> and <span>$o_{t,i}$</span> are the closing and opening prices of asset <span>$i$</span> at time <span>$t$</span>. The user can decide which relative prices to employ and input the corresponding matrix into the function.</li><li><code>rel_pr_market</code>: A vector sized <span>$t$</span>, which includes the relative prices of the market benchmark on each trading day. The relative prices of the market benchmark are computed similarly to the relative prices of assets. Note that the function takes the last <code>t</code> values of the vector if <code>rel_pr_market</code> containts more than <code>t</code> values.</li></ul><p>Additionally, the function accepts the following keyword arguments:</p><ul><li><code>init_inv=1.</code>: The initial investment, which is set to <code>1.0</code> by default.</li><li><code>RF=0.02</code>: The risk-free rate, which is set to <code>0.02</code> by default.</li><li><code>dpy=252</code>: The number of days in a year, which is set to <code>252</code> days by default.</li><li><code>v=0.</code>: The transaction cost rate, which is set to <code>0.0</code> by default.</li></ul><p>The function returns an object of type <a href="../types/#OnlinePortfolioSelection.OPSMetrics"><code>OPSMetrics</code></a> containing all the metrics as fields. Now, let&#39;s choose few algorithms and assess their performance using the aforementioned function.</p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance, StatsPlots

# Fetch data
julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;AMZN&quot;, &quot;META&quot;, &quot;GOOG&quot;];

julia&gt; startdt, enddt = &quot;2023-04-01&quot;, &quot;2023-08-27&quot;;

julia&gt; querry = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; prices = stack(querry) |&gt; permutedims;

julia&gt; market = get_prices(&quot;^GSPC&quot;, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;];

julia&gt; rel_pr = prices[:, 2:end]./prices[:, 1:end-1];

julia&gt; rel_pr_market = market[2:end]./market[1:end-1];

julia&gt; nassets, ndays = size(rel_pr);

# Run algorithms for 30 days
julia&gt; horizon = 30;

# Run models on the given data
julia&gt; loadm = load(prices, 0.5, 8, horizon, 0.1);
julia&gt; uniformm = uniform(nassets, horizon);
julia&gt; cornkm = cornk(prices, horizon, 5, 5, 10, progress=true);
┣████████████████████████████████████████┫ 100.0% |30/30 

julia&gt; names = [&quot;LOAD&quot;, &quot;UNIFORM&quot;, &quot;CORNK&quot;];

julia&gt; metrics = (:Sn, :MER, :IR, :APY, :Ann_Std, :Ann_Sharpe, :MDD, :Calmar);

julia&gt; all_metrics_vals = opsmetrics.([loadm.b, uniformm.b, cornkm.b], Ref(rel_pr), Ref(rel_pr_market));

# Draw a bar plot to depict the values of each metric for each algorithm
julia&gt; groupedbar(
         vcat([repeat([String(metric)], length(names)) for metric in metrics]...),
         [getfield(result, metric) |&gt; last for metric in metrics for result in all_metrics_vals],
         group=repeat(names, length(metrics)),
         dpi=300
       )</code></pre><img src="../assets/performance_eval.png" width="100%"><p>The plot illustrates the value of each metric for each algorithm. </p><h3 id="Individual-functions"><a class="docs-heading-anchor" href="#Individual-functions">Individual functions</a><a id="Individual-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Individual-functions" title="Permalink"></a></h3><p>The metrics can be calculated individually as well. For instance, in the next code block, I compute each metric individually for the &#39;CORNK&#39; algorithm.</p><pre><code class="language-julia hljs"># Compute the cumulative return
julia&gt; sn_ = sn(cornkm.b, rel_pr)
31-element Vector{Float64}:
 1.0
 1.0056658141861143
 1.0456910599891474
 ⋮
 1.0812597940398256
 1.0561895221684217
 1.0661252685319844

# Compute the mean excess return
julia&gt; mer(cornkm.b, rel_pr)
0.0331885901993342

# Compute the information ratio
julia&gt; ir(cornkm.b, rel_pr, rel_pr_market)
0.14797935671154802

# Compute the annualized return
julia&gt; apy_ = apy(last(sn_), size(cornkm.b, 2))
0.7123367957886144

# Compute the annualized standard deviation
julia&gt; ann_std_ = ann_std(sn_, dpy=252)
0.312367085936459

# Compute the annualized sharpe ratio
julia&gt; rf = 0.02
julia&gt; ann_sharpe(apy_, rf, ann_std_)
2.216420445556956

# Compute the maximum drawdown
julia&gt; mdd_ = mdd(sn_)
0.06460283126873347

# Compute the calmar ratio
julia&gt; calmar(apy_, mdd_)
11.026402121997583

# Compute the average turnover
julia&gt; at(rel_pr, cornkm.b)
0.5710393403115563 # Meaning that the weight of each asset is changing 57% of the time

julia&gt; last(all_metrics_vals)

            Cumulative Return: 1.066125303122296
        Mean Excessive Return: 0.03318859854896919
            Information Ratio: 0.1479792121956763
  Annualized Percentage Yield: 0.7123372624638589
Annualized Standard Deviation: 0.31236709233949556
      Annualized Sharpe Ratio: 2.216421894119991
             Maximum Drawdown: 0.06460283279345515
                 Calmar Ratio: 11.026409085516526
             Average Turnover: 0.5710393403115563</code></pre><p>As shown, the results are consistent with the results obtained using the <a href="../funcs/#OnlinePortfolioSelection.opsmetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractVector{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>opsmetrics</code></a> function. Individual functions can be found in <a href="../funcs/#Functions">Functions</a> (see <a href="../funcs/#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>, <a href="../funcs/#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, T}} where T&lt;:AbstractFloat"><code>mer</code></a>, <a href="../funcs/#OnlinePortfolioSelection.ir-Union{Tuple{S}, Tuple{AbstractMatrix{S}, AbstractMatrix{S}, AbstractVector{S}}} where S&lt;:AbstractFloat"><code>ir</code></a>, <a href="../funcs/#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a>, <a href="../funcs/#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a>, <a href="../funcs/#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a>, <a href="../funcs/#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a>, <a href="../funcs/#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a>, and <a href="../funcs/#OnlinePortfolioSelection.at-Tuple{AbstractMatrix, AbstractMatrix}"><code>at</code></a> for more information).</p><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><div class="citation noncanonical"><dl><dt>[23]</dt><dd><div>W. Xi, Z. Li, X. Song and H. Ning. <em>Online portfolio selection with predictive instantaneous risk assessment</em>. <a href="https://doi.org/10.1016/j.patcog.2023.109872">Pattern Recognition <strong>144</strong>, 109872</a> (2023).</div></dd></dl></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Combined/">« Combined Strategies</a><a class="docs-footer-nextpage" href="../funcs/">Functions »</a><div class="flexbox-break"></div><p class="footer-message"><a href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl">OnlinePortfolioSelection.jl</a> v2.10.1 docs powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Thursday 8 February 2024 08:31">Thursday 8 February 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
