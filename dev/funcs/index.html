<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Functions · OnlinePortfolioSelection.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://shayandavoodii.github.io/OnlinePortfolioSelection.jl/funcs/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="OnlinePortfolioSelection.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">OnlinePortfolioSelection.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../fetchdata/">Fetch Financial Data</a></li><li><a class="tocitem" href="../python/">Use In Python</a></li><li><span class="tocitem">OPS Strategies</span><ul><li><a class="tocitem" href="../benchmark/">Benchmark</a></li><li><a class="tocitem" href="../FL/">Follow the Loser</a></li><li><a class="tocitem" href="../FW/">Follow the Winner</a></li><li><a class="tocitem" href="../PM/">Pattern-Matching</a></li><li><a class="tocitem" href="../ML/">Meta-Learning</a></li><li><a class="tocitem" href="../Combined/">Combined Strategies</a></li></ul></li><li><a class="tocitem" href="../performance_eval/">Performance Evaluation</a></li><li class="is-active"><a class="tocitem" href>Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Functions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Functions</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/main/docs/src/funcs.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.ann_sharpe</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ann_sharpe(APY::T, Rf::T, sigma_prtf::T) where T&lt;:AbstractFloat</code></pre><p>Calculate the Annualized Sharpe Ratio of investment.</p><p><strong>Arguments</strong></p><ul><li><code>APY::T</code>: the APY of investment.</li><li><code>Rf::T</code>: the risk-free rate of return.</li><li><code>sigma_prtf::T</code>: the standard deviation of the portfolio <span>$sigma_p$</span>.</li></ul><p><strong>Returns</strong></p><ul><li><code>::AbstractFloat</code>: the Annualized Sharpe Ratio of investment.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Tools/metrics.jl#L166-L178">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.ann_std-Tuple{Vector{&lt;:AbstractFloat}}" href="#OnlinePortfolioSelection.ann_std-Tuple{Vector{&lt;:AbstractFloat}}"><code>OnlinePortfolioSelection.ann_std</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ann_std(cum_ret::Vector{AbstractFloat}; dpy)</code></pre><p>Calculate the Annualized Standard Deviation (σₚ) of portfolio.</p><p><strong>Arguments</strong></p><ul><li><code>cum_ret::Vector{AbstractFloat}</code>: the cumulative return of investment during the investment period.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>dpy</code>: the number of days in a year.</li></ul><p><strong>Returns</strong></p><ul><li><code>::AbstractFloat</code>: the Annualized Standard Deviation (σₚ) of portfolio.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Tools/metrics.jl#L130-L143">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.anticor-Union{Tuple{T}, Tuple{Matrix{T}, Int64}} where T&lt;:Real" href="#OnlinePortfolioSelection.anticor-Union{Tuple{T}, Tuple{Matrix{T}, Int64}} where T&lt;:Real"><code>OnlinePortfolioSelection.anticor</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">anticor(adj_close::Matrix{T}, window::Int) where {T&lt;:Real}</code></pre><p>Run the Anticor algorithm on <code>adj_close</code> with window sizes <code>window</code>.</p><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{T}</code>: matrix of adjusted close prices</li><li><code>window::Int</code>: size of the window</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: An OPSAlgorithm object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; adj_close = [
       1. 2.
       4. 9.
       7. 8.
       10. 11.
       13. 7.
       8. 17.
       19. 20.
       22. 23.
       25. 8.
       2. 12.
       5. 12.
       5. 0.
       0. 2.
       1. 1.
       ];

julia&gt; adj_close = permutedims(adj_close);

julia&gt; m_anticor = anticor(adj_close, 3);

julia&gt; m_anticor.b
2×14 Matrix{Float64}:
 0.5  0.5  0.5  0.5  …  0.0  0.0  0.0  1.0
 0.5  0.5  0.5  0.5     1.0  1.0  1.0  0.0

julia&gt; sum(m_anticor.b, dims=1) .|&gt; isapprox(1., atol=1e-8) |&gt; all
true</code></pre><p><strong>References</strong></p><ul><li>[1] <a href="https://www.doi.org/10.1613/jair.1336">Can We Learn to Beat the Best Stock</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/Anticor.jl#L1-L52">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64" href="#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>OnlinePortfolioSelection.apy</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">apy(Sn::AbstractFloat, n_periods::S; dpy::S=252) where S&lt;:Int</code></pre><p>Calculate the Annual Percentage Yield (APY) of investment.</p><p><strong>Arguments</strong></p><ul><li><code>Sn::AbstractFloat</code>: the cumulative return of investment.</li><li><code>n_periods::S</code>: the number investment periods.</li><li><code>dpy::S=252</code>: the number of days in a year.</li></ul><p><strong>Returns</strong></p><ul><li><code>::AbstractFloat</code>: the APY of investment.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Tools/metrics.jl#L148-L160">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.bk-Union{Tuple{S}, Tuple{T}, Tuple{Matrix{T}, S, S, Any}} where {T&lt;:Float64, S&lt;:Int64}" href="#OnlinePortfolioSelection.bk-Union{Tuple{S}, Tuple{T}, Tuple{Matrix{T}, S, S, Any}} where {T&lt;:Float64, S&lt;:Int64}"><code>OnlinePortfolioSelection.bk</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">bk(rel_price::Matrix{T}, K::S, L::S, c) where {T&lt;:Float64, S&lt;:Int}</code></pre><p>Run Bᴷ algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>rel_price::Matrix{T}</code>: Relative prices of assets.</li><li><code>K::S</code>: Number of experts.</li><li><code>L::S</code>: Number of time windows.</li><li><code>c::T</code>: The similarity threshold.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_price</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: An object of type <code>OPSAlgorithm</code>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; daily_relative_prices = rand(10, 100);

julia&gt; model = bk(daily_relative_prices, 10, 10, 0.5);

julia&gt; model.alg
&quot;Bᵏ&quot;

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>Reference</strong></p><ul><li>[1] <a href="https://doi.org/10.1111/j.1467-9965.2006.00274.x">NONPARAMETRIC KERNEL-BASED SEQUENTIAL INVESTMENT STRATEGIES</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/BK.jl#L1-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.bs-Union{Tuple{Matrix{T}}, Tuple{T}} where T&lt;:Float64" href="#OnlinePortfolioSelection.bs-Union{Tuple{Matrix{T}}, Tuple{T}} where T&lt;:Float64"><code>OnlinePortfolioSelection.bs</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">bs(adj_close::Matrix{T}; last_n::Int=0) where {T&lt;:Float64}</code></pre><p>Run the Best So Far algorithm on the given data.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{T}</code>: A matrix of adjusted closing prices of assets.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>last_n::Int</code>: The number of periods to look back for the performance of each asset. If <code>last_n</code> is 0, then the performance is calculated from the first period to the previous period.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p>The <code>adj_close</code> matrix should be in the order of assets x periods.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: An instance of <code>OPSAlgorithm</code>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; adj_close = rand(5, 10);

julia&gt; model = bs(adj_close, last_n=2);

julia&gt; model.b
5×10 Matrix{Float64}:
 0.2  0.0  0.0  0.0  1.0  0.0  0.0  0.0  0.0  0.0
 0.2  0.0  0.0  1.0  0.0  1.0  0.0  0.0  0.0  0.0
 0.2  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 0.2  1.0  1.0  0.0  0.0  0.0  1.0  0.0  1.0  1.0
 0.2  0.0  0.0  0.0  0.0  0.0  0.0  1.0  0.0  0.0

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>References</strong></p><ul><li>[1] <a href="https://doi.org/10.1142/S0219024907004251">KERNEL-BASED SEMI-LOG-OPTIMAL EMPIRICAL PORTFOLIO SELECTION STRATEGIES</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/BS.jl#L1-L40">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.calmar</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">calmar(APY::T, MDD::T) where T&lt;:AbstractFloat</code></pre><p>Calculate the Calmar Ratio of investment.</p><p><strong>Arguments</strong></p><ul><li><code>APY::T</code>: the APY of investment.</li><li><code>MDD::T</code>: the MDD of investment.</li></ul><p><strong>Returns</strong></p><ul><li><code>::AbstractFloat</code>: the Calmar Ratio of investment.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Tools/metrics.jl#L209-L220">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.cluslog" href="#OnlinePortfolioSelection.cluslog"><code>OnlinePortfolioSelection.cluslog</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">cluslog()
cluslog(
  rel_pr::AbstractMatrix{&lt;:AbstractFloat},
  horizon::Int,
  TW::Int,
  clus_mod::Type{&lt;:ClusteringModel},
  nclusters::Int,
  nclustering::Int,
  boundries::NTuple{2, AbstractFloat};
  log::Bool=true
)</code></pre><p>You need to install and import the following packages before using this function:</p><ul><li><code>Clustering</code></li></ul><pre><code class="language-julia hljs">julia&gt; using Pkg

julia&gt; Pkg.add(name=&quot;Clustering&quot;, version=&quot;0.15.2&quot;)

julia&gt; using OnlinePortfolioSelection, Clustering</code></pre><pre><code class="nohighlight hljs">cluslog(
  rel_pr::AbstractMatrix{&lt;:AbstractFloat},
  horizon::Int,
  TW::Int,
  clus_mod::Type{&lt;:ClusteringModel},
  nclusters::Int,
  nclustering::Int,
  boundries::NTuple{2, AbstractFloat};
  log::Bool=true
)</code></pre><p>Run KMNLOG, KMDLOG, etc., algorithms on the given data.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix{&lt;:AbstractFloat}</code>: Relative prices of assets. Each column</li></ul><p>represents the price of an asset at a given time.</p><ul><li><code>horizon::Int</code>: Number of trading days.</li><li><code>TW::Int</code>: Maximum time window length to be examined.</li><li><code>clus_mod::Type{&lt;:ClusteringModel}</code>: Clustering model to be used. Currently, only</li></ul><p><code>KmeansModel</code> and <code>KmedoidsModel</code> are supported.</p><ul><li><code>nclusters::Int</code>: The maximum number of clusters to be examined.</li><li><code>nclustering::Int</code>: The number of times clustering algorithm is run for optimal</li></ul><p>number of clusters.</p><ul><li><code>boundries::NTuple{2, AbstractFloat}</code>: The lower and upper boundries for the</li></ul><p>weights of assets in the portfolio.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>log::Bool=true</code>: Whether to log the progress or not.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An <a href="#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><p>Two clustering model is available as of now: KmeansModel, and KmedoidsModel. The first example utilizes <code>KmeansModel</code>:</p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, Clustering

julia&gt; adj_close = [
         1.5464 1.5852 1.6532 1.7245 1.5251 1.4185 1.2156 1.3231 1.3585 1.4563 1.4456
         1.2411 1.2854 1.3456 1.4123 1.5212 1.5015 1.4913 1.5212 1.5015 1.4913 1.5015
         1.3212 1.3315 1.3213 1.3153 1.3031 1.2913 1.2950 1.2953 1.3315 1.3213 1.3315
       ]

julia&gt; rel_pr = adj_close[:, 2:end]./adj_close[:, 1:end-1]

julia&gt; horizon = 3; TW = 3; nclusters_ = 3; nclustering = 10; lb, ub = 0.0, 1.;

julia&gt; model = cluslog(rel_pr, horizon, TW, KmeansModel, nclusters_, nclustering, (lb, ub));

julia&gt; model.b
3×3 Matrix{Float64}:
0.00264911  0.00317815  0.148012
0.973581    0.971728    0.848037
0.02377     0.0250939   0.00395028

julia&gt; sum(model.b , dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p>The same approach works for <code>KmedoidsModel</code> as well:</p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, Clustering

julia&gt; model = cluslog(rel_pr, horizon, TW, KmedoidsModel, nclusters_, nclustering, (lb, ub));

julia&gt; model.b
3×3 Matrix{Float64}:
4.59938e-7  4.96421e-7  4.89426e-7
0.999998    0.999997    0.999997
2.02964e-6  2.02787e-6  2.02964e-6

julia&gt; sum(model.b , dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>Reference</strong></p><blockquote><p><a href="https://doi.org/10.1016/j.eswa.2020.113546">An online portfolio selection algorithm using clustering approaches and considering transaction costs</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/CLUSLOG.jl#L1-L107">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.cornk-Union{Tuple{T}, Tuple{Matrix{Float64}, Vararg{T, 4}}} where T&lt;:Int64" href="#OnlinePortfolioSelection.cornk-Union{Tuple{T}, Tuple{Matrix{Float64}, Vararg{T, 4}}} where T&lt;:Int64"><code>OnlinePortfolioSelection.cornk</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">cornk(
  adj_close::Matrix{Float64},
  horizon::T,
  k::T,
  w::T,
  p::T;
  init_budg=1
) where T&lt;:Int</code></pre><p>Run CORN-K algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{Float64}</code>: Adjusted close prices of assets.</li><li><code>horizon::T</code>: The number of periods to invest.</li><li><code>k::T</code>: The number of top experts to be selected.</li><li><code>w::T</code>: maximum length of time window to be examined.</li><li><code>p::T</code>: maximum number of correlation coefficient thresholds.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>init_budg=1</code>: The initial budget for investment.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: An object of type <code>OPSAlgorithm</code>.</li></ul><p><strong>Reference</strong></p><ul><li>[1] <a href="https://doi.org/10.1145/1961189.1961193">CORN: Correlation-driven nonparametric learning approach for portfolio selection</a></li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; adj_close = rand(5, 100);

julia&gt; model = cornk(adj_close, 10, 3, 5, 3);

julia&gt; model.alg
&quot;CORN-K&quot;

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/CORN.jl#L79-L124">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.cornu-Union{Tuple{M}, Tuple{T}, Tuple{Matrix{T}, M, M}} where {T&lt;:Float64, M&lt;:Int64}" href="#OnlinePortfolioSelection.cornu-Union{Tuple{M}, Tuple{T}, Tuple{Matrix{T}, M, M}} where {T&lt;:Float64, M&lt;:Int64}"><code>OnlinePortfolioSelection.cornu</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">cornu(
  adj_close::Matrix{T},
  horizon::M,
  w::M;
  rho::T=0.2,
  init_budg=1
) where {T&lt;:Float64, M&lt;:Int}</code></pre><p>Run CORN-U algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{T}</code>: Adjusted close prices of assets.</li><li><code>horizon::M</code>: The number of periods to invest.</li><li><code>w::M</code>: maximum length of time window to be examined.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>rho::T=0.2</code>: The correlation coefficient threshold.</li><li><code>init_budg=1</code>: The initial budget for investment.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: An object of type <code>OPSAlgorithm</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; adj_close = rand(5, 100);

julia&gt; model = cornu(adj_close, 10, 5, 0.5);

julia&gt; model.alg
&quot;CORN-U&quot;

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>Reference</strong></p><ul><li>[1] <a href="https://doi.org/10.1145/1961189.1961193">CORN: Correlation-driven nonparametric learning approach for portfolio selection</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/CORN.jl#L1-L44">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.crp-Union{Tuple{Matrix{T}}, Tuple{T}} where T&lt;:Float64" href="#OnlinePortfolioSelection.crp-Union{Tuple{Matrix{T}}, Tuple{T}} where T&lt;:Float64"><code>OnlinePortfolioSelection.crp</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">crp(adj_close::Matrix{T}) where T&lt;:Float64</code></pre><p>Run Constant Rebalanced Portfolio (CRP) algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{Float64}</code>: adjusted close prices</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: OPSAlgorithm object</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; typeof(adj_close), size(adj_close)
(Matrix{Float64}, (3, 10))

julia&gt; m_crp = crp(adj_close);

julia&gt; m_crp.b
3×10 Matrix{Float64}:
 0.333333  0.333333  0.333333  0.333333  0.333333  0.333333  0.333333  0.333333  0.333333  0.333333
 0.333333  0.333333  0.333333  0.333333  0.333333  0.333333  0.333333  0.333333  0.333333  0.333333
 0.333333  0.333333  0.333333  0.333333  0.333333  0.333333  0.333333  0.333333  0.333333  0.333333

julia&gt; sum(m_crp.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>References</strong></p><ul><li>[1] <a href="https://onlinelibrary.wiley.com/doi/10.1111/j.1467-9965.1991.tb00002.x">Universal Portfolios</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/CRP.jl#L1-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.cwogd-Tuple{AbstractMatrix, AbstractFloat, Any}" href="#OnlinePortfolioSelection.cwogd-Tuple{AbstractMatrix, AbstractFloat, Any}"><code>OnlinePortfolioSelection.cwogd</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">cwogd(
  rel_pr::AbstractMatrix,
  γ::AbstractFloat,
  H;
  bj::AbstractMatrix=diagm(ones(size(rel_pr, 1)))
)</code></pre><p>Run the CW-OGD algorithm.</p><p><strong>Positional Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix</code>: Relative price matrix where it represents proportion of the closing price to the opening price of each asset in each day.</li><li><code>γ::AbstractFloat</code>: Regular term coefficient of the basic expert&#39;s loss function.</li><li><code>H::AbstractFloat</code>: Constant for calculating step sizes.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>bj::AbstractMatrix=diagm(ones(size(rel_pr, 1)))</code>: Matrix of experts opinions. Each column of this matrix must have just one positive element == 1. and others are zero. Also, sum of each column must be equal to 1. and number of rows must be equal to number of rows of <code>rel_pr</code>.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An object of <a href="#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> type.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;GOOG&quot;];

julia&gt; startdt, enddt = &quot;2019-01-01&quot;, &quot;2019-01-10&quot;;

julia&gt; querry_open_price = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;open&quot;] for ticker in tickers];

julia&gt; open_pr = reduce(hcat, querry_open_price) |&gt; permutedims;

julia&gt; querry_close_pr = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; close_pr = reduce(hcat, querry_close_pr) |&gt; permutedims;

julia&gt; rel_pr = close_pr ./ open_pr
3×6 Matrix{Float64}:
 1.01956  0.987568  1.02581  0.994822  1.00796   1.01335
 1.01577  0.973027  1.02216  1.00413   0.997671  1.00395
 1.0288   0.976042  1.03692  0.997097  1.00016   0.993538

julia&gt; gamma = 0.1; H = 0.5;

julia&gt; model = cwogd(rel_pr, gamma, H);

julia&gt; model.b
3×5 Matrix{Float64}:
 0.333333  0.351048  0.346241  0.338507  0.350524
 0.333333  0.321382  0.309454  0.320351  0.311853
 0.333333  0.32757   0.344305  0.341142  0.337623

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p>Or using a custom matrix of experts opinions:</p><pre><code class="language-julia hljs">julia&gt; b1 = [
          0.0 1.0 0.0
          1.0 0.0 0.0
          0.0 0.0 1.0
        ]

julia&gt; model = cwogd(rel_pr, gamma, H, bj=b1);

julia&gt; model.b
3×6 Matrix{Float64}:
 0.333333  0.329802  0.347517  0.34271   0.334976  0.346992
 0.333333  0.322351  0.3104    0.298472  0.309369  0.300871
 0.333333  0.347847  0.342083  0.358819  0.355655  0.352137

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>References</strong></p><blockquote><p><a href="https://doi.org/10.1016/j.knosys.2021.107533">[1] Combining expert weights for online portfolio selection based on the gradient descent algorithm.</a></p></blockquote></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/CW-OGD.jl#L59-L142">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.dricornk-Union{Tuple{M}, Tuple{T}, Tuple{Matrix{T}, Vector{T}, Vararg{M, 4}}} where {T&lt;:Float64, M&lt;:Int64}" href="#OnlinePortfolioSelection.dricornk-Union{Tuple{M}, Tuple{T}, Tuple{Matrix{T}, Vector{T}, Vararg{M, 4}}} where {T&lt;:Float64, M&lt;:Int64}"><code>OnlinePortfolioSelection.dricornk</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">dricornk(
  adj_close::Matrix{T},
  adj_close_market::Vector{T},
  horizon::M,
  k::M,
  w::M,
  p::M;
  lambda::T=1e-3,
  init_budg=1
) where {T&lt;:Float64, M&lt;:Int}</code></pre><p>Run the DRICORNK algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{T}</code>: A matrix of adjusted close prices of the assets.</li><li><code>adj_close_market::Vector{T}</code>: A vector of adjusted close prices of the market in the same period.</li><li><code>horizon::M</code>: The investment horizon.</li><li><code>k::M</code>: The number of experts.</li><li><code>w::M</code>: maximum length of time window to be examined.</li><li><code>p::M</code>: maximum number of correlation coefficient thresholds.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>lambda::T=1e-3</code>: The regularization parameter.</li><li><code>init_budg=1</code>: The initial budget for investment.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: An object of type <code>OPSAlgorithm</code>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; stocks_adj, market_adj = rand(10, 100), rand(100);

julia&gt; m_dricornk = dricornk(stocks_adj, market_adj, 5, 2, 4, 3);

julia&gt; sum(m_dricornk.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>Reference</strong></p><ul><li>[1] <a href="https://www.doi.org/10.1007/978-3-030-66151-9_12">DRICORN-K: A Dynamic RIsk CORrelation-driven Non-parametric Algorithm for Online Portfolio Selection</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/DRICORNK.jl#L1-L47">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.eg-Tuple{Matrix{Float64}}" href="#OnlinePortfolioSelection.eg-Tuple{Matrix{Float64}}"><code>OnlinePortfolioSelection.eg</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">eg(adj_close::Matrix{Float64}; eta=0.05)</code></pre><p>Exponential Gradient (EG) algorithm.</p><p>Calculate the Exponential Gradient (EG) weights and budgets using the given historical prices and parameters and return an EG object.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{Float64}</code>: Historical adjusted close prices.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>eta=0.05</code>: Learning rate.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: OPSAlgorithm object.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; typeof(adj_close), size(adj_close)
(Matrix{Float64}, (3, 10))

julia&gt; m_eg = eg(adj_close);

julia&gt; m_eg.b
3×10 Matrix{Float64}:
 0.333333  0.333119  0.333296  0.333232  0.33327   0.333276  0.333201  0.333171  0.332832  0.332789
 0.333333  0.333436  0.333274  0.333485  0.333481  0.333359  0.333564  0.333477  0.333669  0.333835
 0.333333  0.333445  0.33343   0.333283  0.333249  0.333365  0.333234  0.333353  0.333499  0.333377

julia&gt; sum(m_eg.b, dims=1) .|&gt; isapprox(1.0) |&gt; all
true</code></pre><p><strong>References</strong></p><ul><li>[1] <a href="https://onlinelibrary.wiley.com/doi/10.1111/1467-9965.00058">On-Line Portfolio Selection Using Multiplicative Updates</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/EG.jl#L1-L43">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.load-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, T, S, S, T}} where {T&lt;:Float64, S&lt;:Int64}" href="#OnlinePortfolioSelection.load-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, T, S, S, T}} where {T&lt;:Float64, S&lt;:Int64}"><code>OnlinePortfolioSelection.load</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">load(adj_close::AbstractMatrix{T}, α::T, ω::S, horizon::S, η::T, ϵ::T=1.5) where {T&lt;:Float64, S&lt;:Int}</code></pre><p>Run LOAD algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::AbstractMatrix{T}</code>: Adjusted close price data.</li><li><code>α::T</code>: Decay factor. (0 &lt; α &lt; 1)</li><li><code>ω::S</code>: Window size. (ω &gt; 0)</li><li><code>horizon::S</code>: Investment horizon. (n_periods &gt; horizon &gt; 0)</li><li><code>η::T</code>: Threshold value. (η &gt; 0)</li><li><code>ϵ::T=1.5</code>: Expected return threshold value.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>OPSAlgorithm</code>: An object of type <code>OPSAlgorithm</code> containing the weights of each asset for each period.</li><li><code>Sₜ::Vector{Float64}</code>: Cumulative wealth for each period.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs"># Get data
julia&gt; using YFinance
julia&gt; startdt, enddt = &quot;2022-04-01&quot;, &quot;2023-04-27&quot;;
julia&gt; querry = [
          get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker in tickers
       ];
julia&gt; prices = reduce(hcat, querry);
julia&gt; prices = permutedims(prices);

julia&gt; using OnlinePortfolioSelection

julia&gt; model, s = load(prices, 0.5, 30, 5, 0.1);

julia&gt; model.b
5×5 Matrix{Float64}:
 0.2  2.85298e-8  0.0        0.0       0.0
 0.2  0.455053    0.637299   0.694061  0.653211
 0.2  0.215388    0.0581291  0.0       0.0
 0.2  0.329559    0.304572   0.305939  0.346789
 0.2  6.06128e-9  0.0        0.0       0.0

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true

julia&gt; s
6-element Vector{Float64}:
 1.0
 0.9879822754225864
 0.9853561439014098
 0.9836737048568326
 0.971437501096619
 0.9660091217094392</code></pre><p><strong>References</strong></p><ul><li><a href="https://doi.org/10.1016/j.knosys.2019.104958">A local adaptive learning system for online portfolio selection</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/LOAD.jl#L141-L199">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.mdd-Union{Tuple{Vector{T}}, Tuple{T}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.mdd-Union{Tuple{Vector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.mdd</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mdd(Sn::Vector{T}) where T&lt;:AbstractFloat</code></pre><p>Calculate the Maximum Drawdown (MDD) of investment.</p><p><strong>Arguments</strong></p><ul><li><code>Sn::Vector{T}</code>: the cumulative return of investment during the investment period.</li></ul><p><strong>Returns</strong></p><ul><li><code>::AbstractFloat</code>: the MDD of investment.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Tools/metrics.jl#L181-L191">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractFloat}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.mer-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractFloat}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.mer</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mer(
  weights::AbstractMatrix{T},
  rel_pr::AbstractMatrix{T},
  𝘷::AbstractFloat=0.
) where T&lt;:AbstractFloat</code></pre><p>Calculate the investments&#39;s Mean excess return (MER).</p><p><strong>Arguments</strong></p><ul><li><code>weights::T</code>: the weights of the portfolio.</li><li><code>rel_pr::T</code>: the relative price of the stocks.</li><li><code>𝘷::AbstractFloat=0.</code>: the transaction cost rate.</li></ul><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The size of <code>weights</code> and <code>rel_pr</code> must be <code>(n_stocks, n_periods)</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If <code>size(rel_pr, 2)</code> is greater than <code>size(weights, 2)</code>, then the last <code>size(weights, 2)</code> columns of <code>rel_pr</code> will be used.</p></div></div><p><strong>Returns</strong></p><ul><li><code>MER::AbstractFloat</code>: the investments&#39;s Mean excess return (MER).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Tools/metrics.jl#L81-L103">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.mrvol-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, S, S, S, T, T}} where {T&lt;:AbstractFloat, S&lt;:Integer}" href="#OnlinePortfolioSelection.mrvol-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, S, S, S, T, T}} where {T&lt;:AbstractFloat, S&lt;:Integer}"><code>OnlinePortfolioSelection.mrvol</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mrvol(
  rel_pr::AbstractMatrix{T},
  rel_vol::AbstractMatrix{T},
  horizon::S,
  Wₘᵢₙ::S,
  Wₘₐₓ::S,
  λ::T,
  η::T
) where {T&lt;:AbstractFloat, S&lt;:Integer}</code></pre><p>Run MRvol algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>rel_pr::AbstractMatrix{T}</code>: Relative price matrix where it represents proportion of the closing price to the opening price of each asset in each day.</li><li><code>rel_vol::AbstractMatrix{T}</code>: Relative volume matrix where 𝘷ᵢⱼ represents the tᵗʰ trading volume of asset 𝑖 divided by the (t - 1)ᵗʰ trading volume of asset 𝑖.</li><li><code>horizon::S</code>: Investment horizon. The last <code>horizon</code> days of the data will be used to run the algorithm.</li><li><code>Wₘᵢₙ::S</code>: Minimum window size.</li><li><code>Wₘₐₓ::S</code>: Maximum window size.</li><li><code>λ::T</code>: Trade-off parameter in the loss function.</li><li><code>η::T</code>: Learning rate.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>rel_pr</code> and <code>rel_vol</code> should be matrixes of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>OPSAlgorithm</code>: An <a href="#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;GOOG&quot;];

julia&gt; startdt, enddt = &quot;2019-01-01&quot;, &quot;2020-01-01&quot;;

julia&gt; querry_open_price = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;open&quot;] for ticker in tickers];

julia&gt; open_pr = reduce(hcat, querry_open_price) |&gt; permutedims;

julia&gt; querry_close_pr = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; close_pr = reduce(hcat, querry_close_pr) |&gt; permutedims;

julia&gt; querry_vol = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;vol&quot;] for ticker in tickers];

julia&gt; vol = reduce(hcat, querry_vol) |&gt; permutedims;

julia&gt; rel_pr = (close_pr ./ open_pr)[:, 2:end];

julia&gt; rel_vol = vol[:, 2:end] ./ vol[:, 1:end-1];

julia&gt; size(rel_pr) == size(rel_vol)
true

julia&gt; horizon = 100; Wₘᵢₙ = 4; Wₘₐₓ = 10; λ = 0.05; η = 0.01;

julia&gt; r = mrvol(rel_pr, rel_vol, horizon, Wₘᵢₙ, Wₘₐₓ, λ, η);

julia&gt; r.b
3×100 Matrix{Float64}:
 0.333333  0.0204062  0.0444759  …  0.38213   0.467793
 0.333333  0.359864   0.194139      0.213264  0.281519
 0.333333  0.61973    0.761385      0.404606  0.250689</code></pre><p><strong>References</strong></p><ul><li>[1] <a href="https://doi.org/10.1016/j.eswa.2023.121472">Online portfolio selection of integrating expert strategies based on mean reversion and trading volume.</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/MRvol.jl#L257-L325">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.olmar-Tuple{Matrix{Float64}, Int64, Int64}" href="#OnlinePortfolioSelection.olmar-Tuple{Matrix{Float64}, Int64, Int64}"><code>OnlinePortfolioSelection.olmar</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">olmar(adj_close::Matrix{Float64}, ϵ::Int, ω::Int)::OPSAlgortihm</code></pre><p>Run the Online Moving Average Reversion algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{Float64}</code>: matrix of adjusted closing prices.</li><li><code>ϵ::Int</code>: Reversion threshold.</li><li><code>ω::Int</code>: Window size.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgortihm(n_asset, b, alg)</code>: An <code>OPSAlgortihm</code> object.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; adj = [
        1.315 1.326 1.358 1.39461 1.424 1.4015 1.52531
        1.215 1.111 1.215 1.35614 1.454 1.2158 1.32561
       ];

julia&gt; m_olmar = olmar(adj, 2, 3);

julia&gt; m_olmar.b
2×7 Matrix{Float64}:
 0.5  0.5  1.0  1.0  1.0  1.0  0.0
 0.5  0.5  0.0  0.0  0.0  0.0  1.0

julia&gt; all(sum(m_olmar.b, dims=1) .≈ 1.0)
true</code></pre><p><strong>References</strong></p><ul><li>[1] <a href="https://doi.org/10.48550/arXiv.1206.4626">On-Line Portfolio Selection with Moving Average Reversion</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/OLMAR.jl#L1-L39">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.opsmethods-Tuple{}" href="#OnlinePortfolioSelection.opsmethods-Tuple{}"><code>OnlinePortfolioSelection.opsmethods</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">opsmethods()</code></pre><p>Print the available methods in the package.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; opsmethods()

      ===== OnlinePortfolioSelection.jl =====
            Currently available methods
       =====================================

        up: Universal Portfolio - Call `up`
        eg: Exponential Gradient - Call `eg`
     cornu: CORN-U - Call `cornu`
          ⋮</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/OnlinePortfolioSelection.jl#L52-L72">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.rprt-Union{Tuple{Matrix{T}}, Tuple{T}} where T&lt;:Float64" href="#OnlinePortfolioSelection.rprt-Union{Tuple{Matrix{T}}, Tuple{T}} where T&lt;:Float64"><code>OnlinePortfolioSelection.rprt</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">rprt(
  adj_close::Matrix{T};
  w::Int64=5,
  theta::T=0.8,
  epsilon=50
) where T&lt;:Float64</code></pre><p>Run RPRT algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{T}</code>: Adjusted close prices of assets.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>w::Int64=5</code>: maximum length of time window to be examined.</li><li><code>theta::T=0.8</code>: The threshold for the relative price.</li><li><code>epsilon=50</code>: The threshold for the condition of the portfolio.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: An object of type <code>OPSAlgorithm</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; typeof(adj_close), size(adj_close)
(Matrix{Float64}, (3, 7))

julia&gt; m_rprt = rprt(adj_close);

julia&gt; m_rprt.b
3×7 Matrix{Float64}:
 0.333333  0.333333  0.0  0.0  0.0  1.0  0.0
 0.333333  0.333333  1.0  1.0  1.0  0.0  1.0
 0.333333  0.333333  0.0  0.0  0.0  0.0  0.0

julia&gt; sum(m_rprt.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>Reference</strong></p><ul><li>[1] <a href="https://ieeexplore.ieee.org/document/8411138/">Reweighted Price Relative Tracking System for Automatic Portfolio Optimization</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/RPRT.jl#L1-L46">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat" href="#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>OnlinePortfolioSelection.sn</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sn(weights::AbstractMatrix{T}, rel_pr::AbstractMatrix{T}; init_inv::T=1.) where T&lt;:AbstractFloat</code></pre><p>Calculate the cumulative return of investment during a period of time.</p><p><strong>Arguments</strong></p><ul><li><code>weights::AbstractMatrix{T}</code>: the weights of the portfolio.</li><li><code>rel_pr::AbstractMatrix{T}</code>: the relative price of the stocks.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>init_inv::T=1</code>: the initial investment.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p>The size of <code>weights</code> and <code>rel_pr</code> must be <code>(n_stocks, n_periods)</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If <code>size(rel_pr, 2)</code> is greater than <code>size(weights, 2)</code>, then the last <code>size(weights, 2)</code> columns of <code>rel_pr</code> will be used.</p></div></div><p><strong>Returns</strong></p><ul><li><code>all_sn::Vector{T}</code>: the cumulative return of investment during the investment period.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Tools/metrics.jl#L47-L67">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.uniform-Tuple{Int64, Int64}" href="#OnlinePortfolioSelection.uniform-Tuple{Int64, Int64}"><code>OnlinePortfolioSelection.uniform</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">uniform(n_assets::Int, horizon::Int)</code></pre><p>Construct uniform portfolios.</p><p><strong>Arguments</strong></p><ul><li><code>n_assets::Int</code>: The number of assets.</li><li><code>horizon::Int</code>: The number of investment periods.</li></ul><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm</code>: An object of <a href="#OnlinePortfolioSelection.OPSAlgorithm"><code>OPSAlgorithm</code></a> type.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; model = uniform(3, 10)

julia&gt; sum(model.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/uniform.jl#L1-L22">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.up-Tuple{Matrix{Float64}}" href="#OnlinePortfolioSelection.up-Tuple{Matrix{Float64}}"><code>OnlinePortfolioSelection.up</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">up(adj_close::Matrix{Float64}; eval_points::Int=10^4)</code></pre><p>Universal Portfolio (UP) algorithm.</p><p>Calculate the Universal Portfolio (UP) weights and budgets using the given historical prices and parameters.</p><p><strong>Arguments</strong></p><ul><li><code>adj_close::Matrix{Float64}</code>: Historical adjusted close prices.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>eval_points::Int=10^4</code>: Number of evaluation points.</li></ul><div class="admonition is-warning"><header class="admonition-header">Beware!</header><div class="admonition-body"><p><code>adj_close</code> should be a matrix of size <code>n_assets</code> × <code>n_periods</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSAlgorithm(n_assets, b, alg)</code>: OPSAlgorithm object.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection

julia&gt; typeof(adj_close), size(adj_close)
(Matrix{Float64}, (3, 30))

julia&gt; m_up = up(adj_close);

julia&gt; m_up.b
3×30 Matrix{Float64}:
 0.333333  0.331149  0.33204   0.331716  …  0.326788  0.325788  0.325829  0.326222
 0.333333  0.336058  0.335239  0.336304     0.343405  0.342161  0.342283  0.340693
 0.333333  0.332793  0.33272   0.331981     0.329807  0.332051  0.331888  0.333086

julia&gt; sum(m_up.b, dims=1) .|&gt; isapprox(1.) |&gt; all
true</code></pre><p><strong>References</strong></p><ul><li>[1] <a href="https://doi.org/10.1111/j.1467-9965.1991.tb00002.x">Universal Portfolios</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Algos/UP.jl#L1-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.OPSAlgorithm" href="#OnlinePortfolioSelection.OPSAlgorithm"><code>OnlinePortfolioSelection.OPSAlgorithm</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">OPSAlgorithm{T&lt;:Float64}</code></pre><p>A <code>OPSAlgorithm</code> object that contains the result of running the algorithm.</p><p><strong>Fields</strong></p><ul><li><code>n_asset::Int</code>: Number of assets in the portfolio.</li><li><code>b::Matrix{T}</code>: Weights of the created portfolios.</li><li><code>alg::String</code>: Name of the algorithm.</li></ul><p>The formula for calculating the cumulative return of the portfolio is as follows:</p><p class="math-container">\[{S_n} = {S_0}\prod\limits_{t = 1}^T {\left\langle {{b_t},{x_t}} \right\rangle }\]</p><p>where <span>$S₀$</span> is the initial budget, <span>$n$</span> is the investment horizon, <span>$b_t$</span> is the vector of weights of the period <span>$t$</span>, and <span>$x_t$</span> is the relative price of the <span>$t$</span>-th period.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Types/Algorithms.jl#L1-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.OPSMetrics" href="#OnlinePortfolioSelection.OPSMetrics"><code>OnlinePortfolioSelection.OPSMetrics</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">OPSMetrics(Sn::Vector{T}, APY::T, Ann_Sharpe::T, MDD::T, Calmar::T) where {T&lt;:AbstractFloat}</code></pre><p>A struct to store the metrics of the OPS algorithm.</p><p><strong>Fields</strong></p><ul><li><code>Sn::Vector{T}</code>: the cumulative return of investment during the investment period.</li><li><code>APY::T</code>: the Annual Percentage Yield (APY) of investment.</li><li><code>Ann_Std::T</code>: the Annualized Standard Deviation (σₚ) of investment.</li><li><code>Ann_Sharpe::T</code>: the Annualized Sharpe Ratio (SR) of investment.</li><li><code>MDD::T</code>: the Maximum Drawdown (MDD) of investment.</li><li><code>Calmar::T</code>: the Calmar Ratio of investment.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Tools/metrics.jl#L1-L13">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OnlinePortfolioSelection.OPSMetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}" href="#OnlinePortfolioSelection.OPSMetrics-Union{Tuple{S}, Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where {T&lt;:AbstractFloat, S&lt;:Int64}"><code>OnlinePortfolioSelection.OPSMetrics</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">OPSMetrics(
  weights::AbstractMatrix{T},
  rel_pr::AbstractMatrix{T};
  init_inv::T=1.,
  Rf::T=0.02
  dpy::S=252,
  v::T=0.
  dpy::S=252
) where {T&lt;:AbstractFloat, S&lt;:Int}</code></pre><p>Calculate the metrics of an OPS algorithm.</p><p><strong>Arguments</strong></p><ul><li><code>weights::AbstractMatrix{T}</code>: the weights of the portfolio.</li><li><code>rel_pr::AbstractMatrix{T}</code>: the relative price of the stocks.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>init_inv::T=1</code>: the initial investment.</li><li><code>Rf::T=0.02</code>: the risk-free rate of return.</li><li><code>dpy::S=252</code>: the number of days in a year.</li><li><code>v::T=0.</code>: the transaction cost rate.</li></ul><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The size of <code>weights</code> and <code>rel_pr</code> must be <code>(n_stocks, n_periods)</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If <code>size(rel_pr, 2)</code> is greater than <code>size(weights, 2)</code>, then the last <code>size(weights, 2)</code> columns of <code>rel_pr</code> will be used.</p></div></div><p><strong>Returns</strong></p><ul><li><code>::OPSMetrics</code>: the metrics of the OPS algorithm.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/de5c4dedad20fc5016cf7f813391aa3c603f2454/src/Tools/metrics.jl#L223-L254">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../performance_eval/">« Performance Evaluation</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Friday 27 October 2023 11:47">Friday 27 October 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
