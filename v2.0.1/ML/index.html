<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Meta-Learning · OnlinePortfolioSelection.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://shayandavoodii.github.io/OnlinePortfolioSelection.jl/ML/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="OnlinePortfolioSelection.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">OnlinePortfolioSelection.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../fetchdata/">Fetch Financial Data</a></li><li><a class="tocitem" href="../python/">Use In Python</a></li><li><span class="tocitem">OPS Strategies</span><ul><li><a class="tocitem" href="../benchmark/">Benchmark</a></li><li><a class="tocitem" href="../FL/">Follow the Loser</a></li><li><a class="tocitem" href="../FW/">Follow the Winner</a></li><li><a class="tocitem" href="../PM/">Pattern-Matching</a></li><li class="is-active"><a class="tocitem" href>Meta-Learning</a><ul class="internal"><li><a class="tocitem" href="#Combination-Weights-based-on-Online-Gradient-Descent-(CW-OGD)"><span>Combination Weights based on Online Gradient Descent (CW-OGD)</span></a></li></ul></li><li><a class="tocitem" href="../Combined/">Combined Strategies</a></li></ul></li><li><a class="tocitem" href="../performance_eval/">Performance Evaluation</a></li><li><a class="tocitem" href="../funcs/">Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">OPS Strategies</a></li><li class="is-active"><a href>Meta-Learning</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Meta-Learning</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/shayandavoodii/OnlinePortfolioSelection.jl/blob/main/docs/src/ML.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Meta-Learning-Strategies-(ML)"><a class="docs-heading-anchor" href="#Meta-Learning-Strategies-(ML)">Meta-Learning Strategies (ML)</a><a id="Meta-Learning-Strategies-(ML)-1"></a><a class="docs-heading-anchor-permalink" href="#Meta-Learning-Strategies-(ML)" title="Permalink"></a></h1><p>ML strategie are used to combine the experts opinitions to achieve a final portfolio. The opinion of each expert is a vector of weights that sum to one. Orthonormaly, the performance of each expert gets quantified, and affects the final portfolio. Each expert, can be a portfolio optimization model, or just a vector of weights as an input. The following ML strategies are implemented so far in the package:</p><ol><li>Combination Weights based on Online Gradient Descent (CW-OGD) </li></ol><h2 id="Combination-Weights-based-on-Online-Gradient-Descent-(CW-OGD)"><a class="docs-heading-anchor" href="#Combination-Weights-based-on-Online-Gradient-Descent-(CW-OGD)">Combination Weights based on Online Gradient Descent (CW-OGD)</a><a id="Combination-Weights-based-on-Online-Gradient-Descent-(CW-OGD)-1"></a><a class="docs-heading-anchor-permalink" href="#Combination-Weights-based-on-Online-Gradient-Descent-(CW-OGD)" title="Permalink"></a></h2><p><a href="https://doi.org/10.1016/j.knosys.2021.107533">Zhang et al. (2021)</a> proposed a new online portfolio selection strategy based on a weighted learning technique and an online gradient descent algorithm. Their strategy achieves improved robustness by integrating different expert strategies and overcomes the difficult problem of complex computational time. First, an expert pool including many basic expert strategies, in which they choose the strategy that invests in a single stock as the basic expert strategy, is established. Second, they exploit the loss function to evaluate the performance of each basic expert strategies and use the OGD algorithm to update the weight vector for the experts based on their losses.</p><h3 id="Run-CW-OGD"><a class="docs-heading-anchor" href="#Run-CW-OGD">Run CW-OGD</a><a id="Run-CW-OGD-1"></a><a class="docs-heading-anchor-permalink" href="#Run-CW-OGD" title="Permalink"></a></h3><p><strong>Note:</strong> This package is meant to be used by researchers <strong>NOT FOR MARKET PRACTITIONERS</strong>. Let&#39;s run the algorithm on the real market data. (see <a href="../funcs/#OnlinePortfolioSelection.cwogd-Tuple{AbstractMatrix, AbstractFloat, Any}"><code>cwogd</code></a> for more information.)</p><pre><code class="language-julia hljs">julia&gt; using OnlinePortfolioSelection, YFinance

julia&gt; tickers = [&quot;AAPL&quot;, &quot;MSFT&quot;, &quot;GOOG&quot;];

julia&gt; startdt, enddt = &quot;2019-01-01&quot;, &quot;2019-01-10&quot;;

julia&gt; querry_open_price = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;open&quot;] for ticker in tickers];

julia&gt; open_pr = reduce(hcat, querry_open_price) |&gt; permutedims;

julia&gt; querry_close_pr = [get_prices(ticker, startdt=startdt, enddt=enddt)[&quot;adjclose&quot;] for ticker in tickers];

julia&gt; close_pr = reduce(hcat, querry_close_pr) |&gt; permutedims;

julia&gt; rel_pr = close_pr ./ open_pr
3×6 Matrix{Float64}:
 1.01956  0.987568  1.02581  0.994822  1.00796   1.01335
 1.01577  0.973027  1.02216  1.00413   0.997671  1.00395
 1.0288   0.976042  1.03692  0.997097  1.00016   0.993538

julia&gt; gamma = 0.1; H = 0.5;

julia&gt; model = cwogd(rel_pr, gamma, H);

julia&gt; model.b
3×5 Matrix{Float64}:
 0.333333  0.351048  0.346241  0.338507  0.350524
 0.333333  0.321382  0.309454  0.320351  0.311853
 0.333333  0.32757   0.344305  0.341142  0.337623</code></pre><p>Now, let&#39;s investiagte the performance of the algorithm according to some of the prominent metrics:</p><pre><code class="language-julia hljs">julia&gt; metrics = OPSMetrics(model.b, rel_pr)
            Cumulative Return: 1.0323425490046683
                          APY: 2.8071567518024554
Annualized Standard Deviation: 0.2821163077868604
      Annualized Sharpe Ratio: 9.879459906685577
             Maximum Drawdown: 0.021128559444089628
                 Calmar Ratio: 132.86077355300776

juila&gt; metrics.Sn
7-element Vector{Float64}:
 1.0
 1.0213786603648736
 0.9997984006244297
 1.0282690253184847
 1.0266415196096432
 1.0286957343361505
 1.0323425490046683</code></pre><p>The result indicates that if we had invested in the given period, we would have gained ~3.2% profit. It is worht mentioning that each metric can be accessed individually by writing <code>results.</code> and pressing the <code>Tab</code> key. Note that one can individually investigate the performance of the algorithm regarding each metric. See <a href="../funcs/#OnlinePortfolioSelection.sn-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}}} where T&lt;:AbstractFloat"><code>sn</code></a>, <a href="../funcs/#OnlinePortfolioSelection.ann_std-Tuple{AbstractVector{&lt;:AbstractFloat}}"><code>ann_std</code></a>, <a href="../funcs/#OnlinePortfolioSelection.apy-Union{Tuple{S}, Tuple{AbstractFloat, S}} where S&lt;:Int64"><code>apy</code></a>, <a href="../funcs/#OnlinePortfolioSelection.ann_sharpe-Union{Tuple{T}, Tuple{T, T, T}} where T&lt;:AbstractFloat"><code>ann_sharpe</code></a>, <a href="../funcs/#OnlinePortfolioSelection.mdd-Union{Tuple{AbstractVector{T}}, Tuple{T}} where T&lt;:AbstractFloat"><code>mdd</code></a>, and <a href="../funcs/#OnlinePortfolioSelection.calmar-Union{Tuple{T}, Tuple{T, T}} where T&lt;:AbstractFloat"><code>calmar</code></a>. See <a href="../performance_eval/#Performance-evaluation">Performance evaluation</a> section for more information.</p><pre><code class="nohighlight hljs"></code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../PM/">« Pattern-Matching</a><a class="docs-footer-nextpage" href="../Combined/">Combined Strategies »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Friday 27 October 2023 18:08">Friday 27 October 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
